---
phase: 34-full-src-consolidation
plan: 06
type: execute
wave: 3
depends_on: ["34-05"]
files_modified:
  - eslint.config.mjs
autonomous: true

must_haves:
  truths:
    - "contexts/ directory deleted from src/"
    - "ESLint guard blocks imports from @/contexts/"
    - "Build still passes after deletion"
  artifacts:
    - path: "eslint.config.mjs"
      provides: "ESLint guard for contexts imports"
      contains: "@/contexts"
  key_links:
    - from: "eslint.config.mjs"
      to: "no-restricted-imports patterns"
      via: "ESLint rule configuration"
      pattern: "contexts.*moved"
---

<objective>
Delete old contexts/ directory and add ESLint guard

Purpose: Complete contexts migration by removing old directory and preventing accidental re-use
Output: Clean src/ without contexts/, ESLint guard preventing future imports
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-full-src-consolidation/34-RESEARCH.md
@.planning/phases/34-full-src-consolidation/34-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete old contexts/ directory</name>
  <files>src/contexts/</files>
  <action>
    Delete the entire src/contexts/ directory and its contents:
    - src/contexts/DriverContrastContext.tsx
    - src/contexts/

    Use rm -rf or equivalent to remove the directory.
    Verify no remaining references in the codebase.
  </action>
  <verify>
    ls src/contexts/ returns "No such file or directory"
    grep -rn "@/contexts[/'\"]" src/ returns no results (imports already updated)
  </verify>
  <done>src/contexts/ directory completely removed</done>
</task>

<task type="auto">
  <name>Task 2: Add ESLint guard for contexts imports</name>
  <files>eslint.config.mjs</files>
  <action>
    Add ESLint no-restricted-imports rule to block imports from the removed contexts path.

    Add to the patterns array in eslint.config.mjs (after the design-system guard):

    ```javascript
    {
      group: ["@/contexts/*", "@/contexts", "**/contexts/*"],
      message: "contexts/ moved to app/contexts/. Import from @/app/contexts."
    }
    ```

    Place this guard after the design-system guard added in plan 03.
  </action>
  <verify>pnpm lint passes (no existing imports should fail)</verify>
  <done>ESLint guard prevents any future imports from @/contexts/</done>
</task>

<task type="auto">
  <name>Task 3: Final verification</name>
  <files>None (verification only)</files>
  <action>
    Run full verification to ensure migration is complete:

    ```bash
    pnpm lint
    pnpm typecheck
    pnpm build
    ```

    All commands should pass. The contexts migration is complete when:
    1. contexts/ directory is gone
    2. All imports use app/contexts/
    3. ESLint guard blocks future contexts imports
  </action>
  <verify>pnpm lint && pnpm typecheck && pnpm build all pass</verify>
  <done>Contexts migration complete with all guards in place</done>
</task>

</tasks>

<verification>
- [ ] src/contexts/ directory does not exist
- [ ] grep finds 0 references to @/contexts
- [ ] eslint.config.mjs contains contexts import guard
- [ ] pnpm lint passes
- [ ] pnpm typecheck passes
- [ ] pnpm build passes
</verification>

<success_criteria>
contexts/ directory removed, ESLint guard active, build green
</success_criteria>

<output>
After completion, create `.planning/phases/34-full-src-consolidation/34-06-SUMMARY.md`
</output>
