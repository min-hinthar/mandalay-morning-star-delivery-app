---
phase: 34-full-src-consolidation
plan: 05
type: execute
wave: 2
depends_on: ["34-04"]
files_modified:
  - src/components/ui/driver/HighContrastToggle.tsx
  - src/components/ui/driver/DriverShell.tsx
autonomous: true

must_haves:
  truths:
    - "All context consumers import from @/app/contexts/DriverContrastContext"
    - "No imports remain from @/contexts/"
    - "Build passes with new import paths"
    - "DriverContrastProvider still wraps driver routes correctly"
  artifacts:
    - path: "src/components/ui/driver/HighContrastToggle.tsx"
      provides: "Toggle component with new import path"
      contains: "@/app/contexts"
    - path: "src/components/ui/driver/DriverShell.tsx"
      provides: "Driver shell with new import path"
      contains: "@/app/contexts"
  key_links:
    - from: "src/components/ui/driver/DriverShell.tsx"
      to: "DriverContrastProvider"
      via: "import and usage"
      pattern: "from ['\"]@/app/contexts"
---

<objective>
Update context imports and complete migration

Purpose: Migrate 2 consumers to new import path, then delete old directory with ESLint guard
Output: All context consumers using @/app/contexts/, old directory removed
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-full-src-consolidation/34-RESEARCH.md
@.planning/phases/34-full-src-consolidation/34-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update context imports (2 files)</name>
  <files>src/components/ui/driver/HighContrastToggle.tsx, src/components/ui/driver/DriverShell.tsx</files>
  <action>
    Find all files importing from @/contexts/ and update to @/app/contexts/.

    Files to update (from research):
    - HighContrastToggle.tsx (uses useDriverContrast hook)
    - DriverShell.tsx (uses DriverContrastProvider)

    Change:
    ```typescript
    // Before:
    import { useDriverContrast } from "@/contexts/DriverContrastContext";
    // OR
    import { DriverContrastProvider } from "@/contexts/DriverContrastContext";

    // After:
    import { useDriverContrast } from "@/app/contexts/DriverContrastContext";
    // OR
    import { DriverContrastProvider } from "@/app/contexts/DriverContrastContext";
    ```

    Use grep to find ALL occurrences first, then update each file.
  </action>
  <verify>
    grep -rn "from ['\"]@/contexts" src/ returns no results
    grep -rn "from ['\"]@/app/contexts" src/ returns 2 results
  </verify>
  <done>All context imports use new @/app/contexts/ path</done>
</task>

<task type="auto">
  <name>Task 2: Verify build passes</name>
  <files>None (verification only)</files>
  <action>
    Run typecheck and build to ensure context provider still works:

    ```bash
    pnpm typecheck
    pnpm build
    ```

    Watch for errors like "useDriverContrast must be used within DriverContrastProvider" which would indicate provider hierarchy issues.
  </action>
  <verify>pnpm typecheck && pnpm build completes without errors</verify>
  <done>Build passes with all context imports pointing to new app/contexts/ location</done>
</task>

</tasks>

<verification>
- [ ] grep finds 0 imports from @/contexts/
- [ ] grep finds 2 imports from @/app/contexts/DriverContrastContext
- [ ] pnpm typecheck passes
- [ ] pnpm build passes
</verification>

<success_criteria>
All context consumers updated to new import paths, verified by successful build
</success_criteria>

<output>
After completion, create `.planning/phases/34-full-src-consolidation/34-05-SUMMARY.md`
</output>
