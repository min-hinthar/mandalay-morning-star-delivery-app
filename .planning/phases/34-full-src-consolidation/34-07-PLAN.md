---
phase: 34-full-src-consolidation
plan: 07
type: execute
wave: 4
depends_on: ["34-03", "34-06"]
files_modified:
  - src/lib/design-system/index.ts
  - knip.json
autonomous: true

must_haves:
  truths:
    - "lib/design-system/ has barrel export (index.ts)"
    - "knip.json includes lib/design-system/index.ts as entry point"
    - "No unused exports flagged by knip for design-system"
  artifacts:
    - path: "src/lib/design-system/index.ts"
      provides: "Barrel export for design-system tokens"
      exports: ["zIndex", "overlayMotion"]
    - path: "knip.json"
      provides: "Updated entry points configuration"
      contains: "lib/design-system"
  key_links:
    - from: "knip.json"
      to: "src/lib/design-system/index.ts"
      via: "entry configuration"
      pattern: "lib/design-system"
---

<objective>
Create barrel exports and update knip configuration

Purpose: Ensure lib/design-system/ has proper exports and is recognized by knip
Output: Clean barrel export for design-system, knip configured to recognize entry points
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-full-src-consolidation/34-RESEARCH.md
@.planning/phases/34-full-src-consolidation/34-03-SUMMARY.md
@.planning/phases/34-full-src-consolidation/34-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create lib/design-system barrel export</name>
  <files>src/lib/design-system/index.ts</files>
  <action>
    Create a barrel export file at src/lib/design-system/index.ts that re-exports all tokens:

    ```typescript
    /**
     * Design System Tokens
     *
     * Consolidated from src/design-system/ (Phase 34)
     * Contains overlay-specific tokens (z-index layers, motion springs)
     *
     * For V7 playful animation system, use @/lib/motion-tokens instead
     */

    // Z-index layer system for overlays
    export * from "./tokens/z-index";

    // Overlay motion configurations (modals, sheets, toasts)
    export * from "./tokens/motion";
    ```

    This enables cleaner imports like:
    - `import { zIndex } from "@/lib/design-system"` (though direct token imports also work)
  </action>
  <verify>
    File exists and TypeScript can resolve: import { zIndex } from "@/lib/design-system"
  </verify>
  <done>lib/design-system/index.ts barrel export created</done>
</task>

<task type="auto">
  <name>Task 2: Update knip configuration</name>
  <files>knip.json</files>
  <action>
    Check current knip.json and ensure lib entry points are properly configured.

    Read knip.json first. If lib/**/index.ts is not in entry array, add it:

    ```json
    {
      "entry": [
        "src/app/**/*.{ts,tsx}",
        "src/components/**/index.ts",
        "src/lib/**/index.ts"  // Ensure this is present
      ]
    }
    ```

    If lib/**/index.ts is already included (likely from Phase 33), no changes needed.
  </action>
  <verify>npx knip --reporter=compact shows no false positives for lib/design-system exports</verify>
  <done>knip recognizes lib/design-system exports as used</done>
</task>

<task type="auto">
  <name>Task 3: Run knip audit and verify clean state</name>
  <files>None (verification only)</files>
  <action>
    Run knip to ensure no unused exports in the consolidated structure:

    ```bash
    npx knip --reporter=compact
    ```

    Review output for:
    1. No false positives for design-system or contexts
    2. No new unused exports introduced during migration
    3. Any legitimate unused code that could be cleaned up

    If knip reports issues, assess whether they need fixing or config adjustment.
  </action>
  <verify>npx knip shows no unexpected unused exports</verify>
  <done>Knip audit passes with clean state</done>
</task>

</tasks>

<verification>
- [ ] src/lib/design-system/index.ts exists with barrel exports
- [ ] knip.json has lib/**/index.ts in entry array
- [ ] npx knip shows no issues for design-system files
- [ ] pnpm typecheck passes
</verification>

<success_criteria>
lib/design-system has proper barrel export, knip configuration is correct, no unused export warnings
</success_criteria>

<output>
After completion, create `.planning/phases/34-full-src-consolidation/34-07-SUMMARY.md`
</output>
