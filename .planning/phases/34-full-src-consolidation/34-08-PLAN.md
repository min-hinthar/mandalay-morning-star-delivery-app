---
phase: 34-full-src-consolidation
plan: 08
type: execute
wave: 5
depends_on: ["34-07"]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "No duplicate exports exist between lib/ subdirectories"
    - "styles/ has no conflicting CSS files"
    - "types/ has single source of truth for each type definition"
    - "lib/motion-tokens.ts and lib/design-system/tokens/motion.ts serve different purposes"
  artifacts: []
  key_links: []
---

<objective>
Final audit and phase completion verification

Purpose: Verify all Phase 34 success criteria are met with comprehensive audit
Output: Documented verification that all consolidation goals achieved
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-full-src-consolidation/34-RESEARCH.md
@.planning/phases/34-full-src-consolidation/34-07-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify success criteria - no duplicate exports</name>
  <files>None (analysis only)</files>
  <action>
    Verify Phase 34 success criterion #1: No duplicate exports between contexts/, lib/, design-system/

    Run checks:
    1. Confirm design-system/ no longer exists: ls src/design-system/ should fail
    2. Confirm contexts/ no longer exists: ls src/contexts/ should fail
    3. Run npx knip to check for any duplicate export warnings
    4. Verify lib/design-system/tokens/ is the only location for z-index and overlay motion

    Expected result: Only lib/design-system/ and app/contexts/ exist with no duplicates.
  </action>
  <verify>
    ls src/design-system/ fails
    ls src/contexts/ fails
    npx knip shows no duplicate exports
  </verify>
  <done>Success criterion #1 verified: no duplicate exports</done>
</task>

<task type="auto">
  <name>Task 2: Verify success criteria - styles and types organization</name>
  <files>None (analysis only)</files>
  <action>
    Verify Phase 34 success criteria #2 and #3:
    - styles/ consolidated (no conflicting CSS/Tailwind configs)
    - types/ has single source of truth for each type definition

    Run checks:
    1. List styles/ files: ls src/styles/
       Expected: animations.css, high-contrast.css, responsive.css, tokens.css (4 files per research)
    2. Verify globals.css imports all styles correctly
    3. List types/ files: ls src/types/
       Expected: 11 domain type files per research
    4. Verify no overlap between types/ (raw interfaces) and lib/validations/ (Zod-inferred)

    Per RESEARCH.md: "No conflicts detected - types/ contains raw interfaces, lib/validations/ contains Zod-inferred input types. Different purposes, can coexist."
  </action>
  <verify>
    ls src/styles/ shows 4 CSS files
    ls src/types/ shows 11 type files
    grep -rn "export type" src/types/ vs src/lib/validations/ shows different type names
  </verify>
  <done>Success criteria #2 and #3 verified: styles and types organization correct</done>
</task>

<task type="auto">
  <name>Task 3: Final build and lint verification</name>
  <files>None (verification only)</files>
  <action>
    Run comprehensive verification for Phase 34 success criteria #5, #6, #7:
    - Clean barrel exports for all src/ subdirectories
    - No broken imports after consolidation
    - ESLint guards prevent recreation of removed patterns

    Run full verification suite:
    ```bash
    pnpm lint
    pnpm lint:css  # if exists
    pnpm typecheck
    pnpm build
    ```

    Verify ESLint guards exist for:
    - @/design-system (from 34-03)
    - @/contexts (from 34-06)

    Document final src/ directory structure.
  </action>
  <verify>
    pnpm lint && pnpm typecheck && pnpm build all pass
    grep -A2 "design-system.*consolidated" eslint.config.mjs shows guard
    grep -A2 "contexts.*moved" eslint.config.mjs shows guard
  </verify>
  <done>All Phase 34 success criteria verified</done>
</task>

</tasks>

<verification>
- [ ] design-system/ directory does not exist
- [ ] contexts/ directory does not exist
- [ ] lib/design-system/ exists with barrel export
- [ ] app/contexts/ exists with DriverContrastContext
- [ ] styles/ has 4 CSS files (no conflicts)
- [ ] types/ has 11 domain type files (no conflicts)
- [ ] ESLint has guards for design-system and contexts imports
- [ ] pnpm lint passes
- [ ] pnpm typecheck passes
- [ ] pnpm build passes
</verification>

<success_criteria>
All 7 Phase 34 success criteria verified:
1. No duplicate exports between contexts/, lib/, design-system/
2. styles/ consolidated (no conflicting CSS/Tailwind configs)
3. types/ has single source of truth (coexists with lib/validations/ for different purposes)
4. All old/unused code deleted (only latest versions remain)
5. Clean barrel exports for all src/ subdirectories
6. No broken imports after consolidation
7. ESLint guards prevent recreation of removed patterns
</success_criteria>

<output>
After completion, create `.planning/phases/34-full-src-consolidation/34-08-SUMMARY.md`
</output>
