---
phase: 12-dead-code-export-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/contexts/HeaderContext.tsx
  - src/contexts/index.ts
  - src/hooks/use-cart.ts
  - src/stores/cart-store.ts
  - src/lib/ab-testing.ts
  - src/lib/dynamic-imports.tsx
  - src/lib/feature-flags.ts
  - src/types/api.ts
  - src/lib/animations/tabs.ts
  - src/lib/hooks/useExperiment.tsx
  - src/lib/hooks/useFeatureFlag.tsx
  - src/lib/hooks/useFrameRate.ts
  - src/lib/sound/audio-manager.ts
  - src/lib/stripe/client.ts
  - src/lib/supabase/middleware.ts
  - src/lib/utils/constants.ts
  - src/lib/webgl/index.ts
  - src/test/mocks/index.ts
  - src/test/mocks/supabase.ts
  - src/design-system/tokens/colors.ts
autonomous: true

must_haves:
  truths:
    - "No unused utility files exist in contexts/, hooks/, stores/, lib/"
    - "Build passes after file deletion"
    - "TypeScript finds no broken imports"
  artifacts:
    - path: "src/contexts/"
      provides: "Only actively-used context files remain"
      removed:
        - HeaderContext.tsx
        - index.ts
    - path: "src/hooks/"
      provides: "Only actively-used hook files remain"
      removed:
        - use-cart.ts
    - path: "src/stores/"
      provides: "Only actively-used store files remain"
      removed:
        - cart-store.ts
  key_links:
    - from: "dead-code-report.md"
      to: "deleted files"
      via: "knip zero-reference analysis"
      pattern: "Reference Count.*0"
---

<objective>
Delete unused utility and infrastructure files identified by knip analysis.

Purpose: Remove dead code that adds maintenance burden and confusion. These files have zero imports anywhere in the codebase.
Output: 20 fewer files in contexts/, hooks/, stores/, lib/, types/, test/, design-system/
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-analysis-component-creation/dead-code-report.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete context and store files</name>
  <files>
    src/contexts/HeaderContext.tsx
    src/contexts/index.ts
    src/hooks/use-cart.ts
    src/stores/cart-store.ts
  </files>
  <action>
Delete these 4 files that have zero references:

```bash
rm src/contexts/HeaderContext.tsx
rm src/contexts/index.ts
rm src/hooks/use-cart.ts
rm src/stores/cart-store.ts
```

After deletion, run `pnpm typecheck` to verify no broken imports.

Note: src/contexts/ directory may become empty - that's expected. Do NOT delete the directory itself as other tooling may reference it.
  </action>
  <verify>`pnpm typecheck` passes with no errors related to deleted files</verify>
  <done>4 unused context/store files deleted, typecheck passes</done>
</task>

<task type="auto">
  <name>Task 2: Delete unused library utilities</name>
  <files>
    src/lib/ab-testing.ts
    src/lib/dynamic-imports.tsx
    src/lib/feature-flags.ts
    src/lib/animations/tabs.ts
    src/lib/hooks/useExperiment.tsx
    src/lib/hooks/useFeatureFlag.tsx
    src/lib/hooks/useFrameRate.ts
    src/lib/sound/audio-manager.ts
    src/lib/stripe/client.ts
    src/lib/supabase/middleware.ts
    src/lib/utils/constants.ts
    src/lib/webgl/index.ts
    src/types/api.ts
    src/design-system/tokens/colors.ts
    src/test/mocks/index.ts
    src/test/mocks/supabase.ts
  </files>
  <action>
Delete these 16 files that have zero references:

```bash
# Core lib files
rm src/lib/ab-testing.ts
rm src/lib/dynamic-imports.tsx
rm src/lib/feature-flags.ts

# Lib subdirectory files
rm src/lib/animations/tabs.ts
rm src/lib/hooks/useExperiment.tsx
rm src/lib/hooks/useFeatureFlag.tsx
rm src/lib/hooks/useFrameRate.ts
rm src/lib/sound/audio-manager.ts
rm src/lib/stripe/client.ts
rm src/lib/supabase/middleware.ts
rm src/lib/utils/constants.ts
rm src/lib/webgl/index.ts

# Types and design system
rm src/types/api.ts
rm src/design-system/tokens/colors.ts

# Test mocks
rm src/test/mocks/index.ts
rm src/test/mocks/supabase.ts
```

After deletion, verify build still passes. These files were identified by knip as having 0 references.

Note: Some directories may become empty (lib/sound/, lib/webgl/, test/mocks/). Leave empty directories - they can be cleaned up separately if needed.
  </action>
  <verify>`pnpm typecheck && pnpm build` passes</verify>
  <done>16 unused library files deleted, build passes</done>
</task>

</tasks>

<verification>
```bash
# Verify all target files are deleted
for f in \
  src/contexts/HeaderContext.tsx \
  src/contexts/index.ts \
  src/hooks/use-cart.ts \
  src/stores/cart-store.ts \
  src/lib/ab-testing.ts \
  src/lib/dynamic-imports.tsx \
  src/lib/feature-flags.ts \
  src/lib/animations/tabs.ts \
  src/lib/hooks/useExperiment.tsx \
  src/lib/hooks/useFeatureFlag.tsx \
  src/lib/hooks/useFrameRate.ts \
  src/lib/sound/audio-manager.ts \
  src/lib/stripe/client.ts \
  src/lib/supabase/middleware.ts \
  src/lib/utils/constants.ts \
  src/lib/webgl/index.ts \
  src/types/api.ts \
  src/design-system/tokens/colors.ts \
  src/test/mocks/index.ts \
  src/test/mocks/supabase.ts; do
  [ -f "$f" ] && echo "STILL EXISTS: $f" || echo "DELETED: $f"
done

# Full verification
pnpm lint && pnpm typecheck && pnpm test && pnpm build
```
</verification>

<success_criteria>
- [ ] 20 unused files deleted
- [ ] `pnpm typecheck` passes
- [ ] `pnpm build` passes
- [ ] No runtime errors (build completes successfully)
</success_criteria>

<output>
After completion, create `.planning/phases/12-dead-code-export-cleanup/12-01-SUMMARY.md`
</output>
