---
phase: 16-3d-hero-core
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - public/models/rice-bowl.glb
  - public/images/hero-dish-2d.jpg
  - src/components/3d/Hero3DCanvas.tsx
autonomous: false
gap_closure: true
user_setup: []

must_haves:
  truths:
    - "User sees realistic 3D food model in hero section"
    - "Low-end devices show 2D fallback image instead of broken image"
  artifacts:
    - path: "public/models/rice-bowl.glb"
      provides: "3D food model asset"
    - path: "public/images/hero-dish-2d.jpg"
      provides: "2D fallback image for low-end devices"
    - path: "src/components/3d/Hero3DCanvas.tsx"
      provides: "FoodModel import uncommented and used"
  key_links:
    - from: "src/components/3d/Hero3DCanvas.tsx"
      to: "/models/rice-bowl.glb"
      via: "FoodModel url prop"
      pattern: 'url="/models/rice-bowl.glb"'
    - from: "src/components/homepage/Hero3DSection.tsx"
      to: "/images/hero-dish-2d.jpg"
      via: "img src"
      pattern: 'src="/images/hero-dish-2d.jpg"'
---

<objective>
Close Phase 16 verification gaps by sourcing real assets.

Purpose: Replace placeholder geometry with realistic 3D model and provide 2D fallback image for low-end devices.
Output: Working 3D hero with real GLB model and functional 2D fallback.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/16-3d-hero-core/16-VERIFICATION.md

# Existing code to modify
@src/components/3d/Hero3DCanvas.tsx
@src/components/3d/models/FoodModel.tsx
@src/components/homepage/Hero3DSection.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Download 3D food model from Poly.Pizza</name>
  <files>public/models/rice-bowl.glb, public/models/ATTRIBUTION.md</files>
  <action>
    Create public/models/ directory:
    mkdir -p public/models

    Download GLB from Poly.Pizza (CC-BY 3.0):
    curl -L -o public/models/rice-bowl.glb "https://models.poly.pizza/4rXNKJbcxl7/model.glb"

    Create attribution file public/models/ATTRIBUTION.md:
    ```markdown
    # 3D Model Attribution

    ## rice-bowl.glb
    - Model: Asian Rice Bowl
    - Author: Poly by Google
    - Source: https://poly.pizza/m/4rXNKJbcxl7
    - License: CC-BY 3.0
    ```

    If curl fails (404 or network error), task fails. Do not attempt fallbacks - human checkpoint will handle asset sourcing issues.
  </action>
  <verify>
    ls -la public/models/rice-bowl.glb shows file exists with size > 10KB
    cat public/models/ATTRIBUTION.md shows attribution text
  </verify>
  <done>GLB model file exists at public/models/rice-bowl.glb with attribution</done>
</task>

<task type="auto">
  <name>Task 2: Download 2D fallback image from Unsplash</name>
  <files>public/images/hero-dish-2d.jpg</files>
  <action>
    Create public/images/ directory:
    mkdir -p public/images

    Download specific food bowl image from Unsplash (free license):
    curl -L -o public/images/hero-dish-2d.jpg "https://images.unsplash.com/photo-1512058564366-18510be2db19?w=800&q=80"

    This image: Asian rice bowl with vegetables by Pille-Riin Priske
    Source: https://unsplash.com/photos/photo-1512058564366-18510be2db19
    Unsplash License: Free to use, no attribution required

    Append to public/models/ATTRIBUTION.md:
    ```markdown

    ## hero-dish-2d.jpg
    - Image: Asian rice bowl with vegetables
    - Author: Pille-Riin Priske
    - Source: https://unsplash.com/photos/photo-1512058564366-18510be2db19
    - License: Unsplash License (free to use)
    ```

    If curl fails, task fails. Do not attempt fallbacks - human checkpoint will handle asset sourcing issues.
  </action>
  <verify>
    ls -la public/images/hero-dish-2d.jpg shows file exists with size > 50KB
    curl -s localhost:3000/images/hero-dish-2d.jpg -o /dev/null -w "%{http_code}" returns 200
  </verify>
  <done>2D fallback image exists at public/images/hero-dish-2d.jpg</done>
</task>

<task type="auto">
  <name>Task 3: Wire up FoodModel in Hero3DCanvas</name>
  <files>src/components/3d/Hero3DCanvas.tsx</files>
  <action>
    Update Hero3DCanvas.tsx to use the real FoodModel:

    1. Uncomment FoodModel import (line 9):
       Change: // import { FoodModel } from "./models/FoodModel";
       To: import { FoodModel } from "./models/FoodModel";

    2. Swap FoodModelPlaceholder for FoodModel in JSX (lines 43-55):
       Remove: <FoodModelPlaceholder ... />
       Add: <FoodModel url="/models/rice-bowl.glb" shouldAnimate={shouldAnimate} position={[0, 0, 0]} scale={1} />

    3. Remove FoodModelPlaceholder import (no longer needed)

    The existing FoodModel component already handles:
    - GLTF loading via drei useGLTF
    - Spring entrance animation
    - shouldAnimate prop for reduced motion

    NOTE: Scale adjustment (if needed) will be handled during human checkpoint verification.
  </action>
  <verify>
    pnpm typecheck passes (no new errors)
    pnpm dev starts without errors
  </verify>
  <done>Hero3DCanvas uses real FoodModel with GLB URL instead of placeholder geometry</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Real 3D food model and 2D fallback image integrated into hero section.
  </what-built>
  <how-to-verify>
    1. Visit http://localhost:3000
    2. Verify 3D hero:
       - 3D food model appears (not procedural placeholder geometry)
       - Can rotate model by dragging
       - Can zoom with scroll/pinch
       - Model looks appetizing (proper textures, not flat colors)
       - Model scale is appropriate (fills canvas, not clipped or too small)
    3. Test 2D fallback:
       - Open DevTools > Performance > CPU throttling 6x slowdown
       - Or manually test: In Hero3DSection.tsx, temporarily change shouldRender3D to false
       - 2D image should appear (not broken image icon)
       - Subtle float animation on the image
    4. Check loading state:
       - Hard refresh (Ctrl+Shift+R) to see loading spinner before 3D loads

    If scale needs adjustment: Report scale value to use (0.5, 1.0, 1.5, 2.0) in issues.
    If assets failed to download: Report which asset and provide alternative URL.
  </how-to-verify>
  <resume-signal>Type "approved" if 3D model and 2D fallback both work, or describe issues (including scale adjustment if needed)</resume-signal>
</task>

</tasks>

<verification>
Phase 16 gap closure verification:
1. npm run typecheck - no new type errors
2. npm run build - builds successfully
3. localhost:3000 shows realistic 3D food model
4. 2D fallback shows real image (not broken)
5. Attribution file exists with proper credits
</verification>

<success_criteria>
- User sees realistic 3D food model (GLB) instead of procedural placeholder
- Low-end devices show actual 2D food image instead of broken image
- All verification gaps from 16-VERIFICATION.md resolved
- Attribution for CC-licensed assets documented
</success_criteria>

<output>
After completion, create `.planning/phases/16-3d-hero-core/16-04-SUMMARY.md`
</output>
