---
phase: 16-3d-hero-core
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - public/models/rice-bowl.glb
  - public/images/hero-dish-2d.jpg
  - src/components/3d/Hero3DCanvas.tsx
autonomous: false
gap_closure: true
user_setup: []

must_haves:
  truths:
    - "User sees realistic 3D food model in hero section"
    - "Low-end devices show 2D fallback image instead of broken image"
  artifacts:
    - path: "public/models/rice-bowl.glb"
      provides: "3D food model asset"
    - path: "public/images/hero-dish-2d.jpg"
      provides: "2D fallback image for low-end devices"
    - path: "src/components/3d/Hero3DCanvas.tsx"
      provides: "FoodModel import uncommented and used"
  key_links:
    - from: "src/components/3d/Hero3DCanvas.tsx"
      to: "/models/rice-bowl.glb"
      via: "FoodModel url prop"
      pattern: 'url="/models/rice-bowl.glb"'
    - from: "src/components/homepage/Hero3DSection.tsx"
      to: "/images/hero-dish-2d.jpg"
      via: "img src"
      pattern: 'src="/images/hero-dish-2d.jpg"'
---

<objective>
Close Phase 16 verification gaps by sourcing real assets.

Purpose: Replace placeholder geometry with realistic 3D model and provide 2D fallback image for low-end devices.
Output: Working 3D hero with real GLB model and functional 2D fallback.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/16-3d-hero-core/16-VERIFICATION.md

# Existing code to modify
@src/components/3d/Hero3DCanvas.tsx
@src/components/3d/models/FoodModel.tsx
@src/components/homepage/Hero3DSection.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Source and download 3D food model</name>
  <files>public/models/rice-bowl.glb</files>
  <action>
    Create public/models/ directory.

    Download a free GLB food bowl model from Poly.Pizza. Use curl to fetch:
    - URL: https://poly.pizza/m/4rXNKJbcxl7 (Asian Rice Bowl by Poly by Google)
    - Direct download: https://models.poly.pizza/4rXNKJbcxl7/model.glb
    - License: CC-BY 3.0 (attribution required)

    Save as: public/models/rice-bowl.glb

    Create attribution file: public/models/ATTRIBUTION.md with content:
    ```
    # 3D Model Attribution

    ## rice-bowl.glb
    - Model: Asian Rice Bowl
    - Author: Poly by Google
    - Source: https://poly.pizza/m/4rXNKJbcxl7
    - License: CC-BY 3.0
    ```

    If Poly.Pizza URL fails, use alternative from Sketchfab:
    - Search "rice bowl glb" on Sketchfab with CC license
    - Or create enhanced placeholder by exporting current FoodModelPlaceholder to GLB using three.js GLTFExporter
  </action>
  <verify>
    ls -la public/models/rice-bowl.glb shows file exists with size > 10KB
    cat public/models/ATTRIBUTION.md shows attribution
  </verify>
  <done>GLB model file exists at public/models/rice-bowl.glb with attribution</done>
</task>

<task type="auto">
  <name>Task 2: Source and add 2D fallback image</name>
  <files>public/images/hero-dish-2d.jpg</files>
  <action>
    Create public/images/ directory.

    Download a free food bowl image. Options in priority order:

    Option A - Unsplash (free, no attribution required for most uses):
    - Search "asian rice bowl" on Unsplash
    - Use curl to download a suitable image
    - Example URL pattern: https://unsplash.com/photos/[id]/download

    Option B - Use existing logo as temporary placeholder:
    - Copy public/logo.png to public/images/hero-dish-2d.jpg as stopgap
    - Mark in ATTRIBUTION.md that this needs replacement

    Option C - Generate placeholder:
    - Create a simple colored gradient image with text overlay
    - Use ImageMagick if available: convert -size 800x800 gradient:orange-brown -gravity center -pointsize 40 -annotate 0 "Burmese Cuisine" public/images/hero-dish-2d.jpg

    Save as: public/images/hero-dish-2d.jpg (or .png, update Hero3DSection.tsx if different extension)

    Add to ATTRIBUTION.md:
    ```
    ## hero-dish-2d.jpg
    - Image: [Description]
    - Author: [Source]
    - License: [License type]
    ```
  </action>
  <verify>
    ls -la public/images/hero-dish-2d.jpg shows file exists
    File opens correctly in browser at localhost:3000/images/hero-dish-2d.jpg
  </verify>
  <done>2D fallback image exists at public/images/hero-dish-2d.jpg</done>
</task>

<task type="auto">
  <name>Task 3: Wire up FoodModel in Hero3DCanvas</name>
  <files>src/components/3d/Hero3DCanvas.tsx</files>
  <action>
    Update Hero3DCanvas.tsx to use the real FoodModel:

    1. Uncomment FoodModel import (line 9):
       Change: // import { FoodModel } from "./models/FoodModel";
       To: import { FoodModel } from "./models/FoodModel";

    2. Swap FoodModelPlaceholder for FoodModel in JSX (lines 43-55):
       Remove: <FoodModelPlaceholder ... />
       Add: <FoodModel url="/models/rice-bowl.glb" shouldAnimate={shouldAnimate} position={[0, 0, 0]} scale={1} />

    3. Keep FoodModelPlaceholder import for fallback (or remove if not needed)

    4. Adjust scale if model appears too large/small (typical GLB needs scale 0.5-2.0)

    The existing FoodModel component already handles:
    - GLTF loading via drei useGLTF
    - Spring entrance animation
    - shouldAnimate prop for reduced motion
  </action>
  <verify>
    npm run typecheck passes
    npm run dev and visit localhost:3000 - 3D model loads in hero
  </verify>
  <done>Hero3DCanvas uses real FoodModel with GLB URL instead of placeholder geometry</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Real 3D food model and 2D fallback image integrated into hero section.
  </what-built>
  <how-to-verify>
    1. Visit http://localhost:3000
    2. Verify 3D hero:
       - 3D food model appears (not procedural placeholder geometry)
       - Can rotate model by dragging
       - Can zoom with scroll/pinch
       - Model looks appetizing (proper textures, not flat colors)
    3. Test 2D fallback:
       - Open DevTools > Performance > CPU throttling 6x slowdown
       - Or manually test: In Hero3DSection.tsx, temporarily change shouldRender3D to false
       - 2D image should appear (not broken image icon)
       - Subtle float animation on the image
    4. Check loading state:
       - Hard refresh (Ctrl+Shift+R) to see loading spinner before 3D loads
  </how-to-verify>
  <resume-signal>Type "approved" if 3D model and 2D fallback both work, or describe issues</resume-signal>
</task>

</tasks>

<verification>
Phase 16 gap closure verification:
1. npm run typecheck - no new type errors
2. npm run build - builds successfully
3. localhost:3000 shows realistic 3D food model
4. 2D fallback shows real image (not broken)
5. Attribution file exists with proper credits
</verification>

<success_criteria>
- User sees realistic 3D food model (GLB) instead of procedural placeholder
- Low-end devices show actual 2D food image instead of broken image
- All verification gaps from 16-VERIFICATION.md resolved
- Attribution for CC-licensed assets documented
</success_criteria>

<output>
After completion, create `.planning/phases/16-3d-hero-core/16-04-SUMMARY.md`
</output>
