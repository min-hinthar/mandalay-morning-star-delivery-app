---
phase: 03-navigation-layout
plan: 05
type: execute
wave: 3
depends_on: ["03-02", "03-03"]
files_modified:
  - src/components/ui-v8/navigation/AppShell.tsx
autonomous: true

must_haves:
  truths:
    - "Header renders at top of app shell on all pages"
    - "BottomNav renders at bottom on mobile screens"
    - "Content area is not obscured by fixed header or nav"
    - "Mobile menu opens when hamburger is clicked"
  artifacts:
    - path: "src/components/ui-v8/navigation/AppShell.tsx"
      provides: "Integrated shell with Header and BottomNav"
      exports: ["AppShell", "AppShellProps"]
  key_links:
    - from: "AppShell.tsx"
      to: "Header.tsx"
      via: "component import and render"
      pattern: "import.*Header.*from"
    - from: "AppShell.tsx"
      to: "BottomNav.tsx"
      via: "component import and render"
      pattern: "import.*BottomNav.*from"
    - from: "AppShell.tsx"
      to: "MobileMenu.tsx"
      via: "component import and render"
      pattern: "import.*MobileMenu.*from"
---

<objective>
Wire Header, BottomNav, and MobileMenu components into AppShell.

Purpose: Complete the navigation integration so the app shell renders actual navigation components instead of placeholder divs. This is the final step that makes all navigation components functional together.

Output: Updated AppShell.tsx with full component integration
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-navigation-layout/03-01-SUMMARY.md
@.planning/phases/03-navigation-layout/03-02-SUMMARY.md
@.planning/phases/03-navigation-layout/03-03-SUMMARY.md
@src/components/ui-v8/navigation/AppShell.tsx
@src/components/ui-v8/navigation/Header.tsx
@src/components/ui-v8/navigation/BottomNav.tsx
@src/components/ui-v8/navigation/MobileMenu.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrate navigation components into AppShell</name>
  <files>src/components/ui-v8/navigation/AppShell.tsx</files>
  <action>
Update AppShell.tsx to import and render actual navigation components:

1. **Add imports**:
```typescript
import { Header } from "./Header";
import { BottomNav } from "./BottomNav";
import { MobileMenu } from "./MobileMenu";
```

2. **Add mobile menu state**:
```typescript
const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
```

3. **Replace header placeholder** with actual Header:
```typescript
{showHeader && (
  <Header
    rightContent={headerSlot}
    onMenuClick={() => setIsMobileMenuOpen(true)}
  />
)}
```

4. **Replace bottom nav placeholder** with actual BottomNav:
```typescript
{showBottomNav && <BottomNav />}
```

5. **Add MobileMenu** (controlled by hamburger in Header):
```typescript
<MobileMenu
  isOpen={isMobileMenuOpen}
  onClose={() => setIsMobileMenuOpen(false)}
  navItems={[
    { href: "/", label: "Home" },
    { href: "/menu", label: "Menu" },
    { href: "/orders", label: "Orders" },
    { href: "/account", label: "Account" },
  ]}
/>
```

6. **Update main content padding**:
- Header is fixed with z-fixed, so content needs top padding
- BottomNav is fixed at bottom (mobile only), so content needs bottom padding on mobile
- Keep existing padding: `pt-[72px] pb-16 md:pb-0`
- Header handles its own positioning (fixed top-0)
- BottomNav handles its own positioning (fixed bottom-0)

7. **Remove placeholder divs** - they were just spacing guides, no longer needed

8. **Add navItems prop** to AppShellProps for customization:
```typescript
interface AppShellProps {
  children: React.ReactNode;
  headerSlot?: React.ReactNode;
  showHeader?: boolean;
  showBottomNav?: boolean;
  navItems?: { href: string; label: string; icon?: React.ReactNode }[];
  className?: string;
}
```

If navItems prop provided, pass to MobileMenu and optionally to Header for desktop nav.
  </action>
  <verify>
- AppShell imports Header, BottomNav, MobileMenu
- No placeholder divs remain (search for "placeholder" comments)
- Header renders when showHeader=true
- BottomNav renders when showBottomNav=true
- MobileMenu state controlled by isMobileMenuOpen
- onMenuClick passed to Header
- pnpm typecheck passes
  </verify>
  <done>
- AppShell renders Header component at top
- AppShell renders BottomNav component at bottom (mobile)
- AppShell renders MobileMenu controlled by hamburger
- Content area has correct padding for fixed elements
- All navigation visible and functional
  </done>
</task>

</tasks>

<verification>
```bash
# Type check
pnpm typecheck

# Verify Header imported and rendered
grep "import.*Header" src/components/ui-v8/navigation/AppShell.tsx
grep "<Header" src/components/ui-v8/navigation/AppShell.tsx

# Verify BottomNav imported and rendered
grep "import.*BottomNav" src/components/ui-v8/navigation/AppShell.tsx
grep "<BottomNav" src/components/ui-v8/navigation/AppShell.tsx

# Verify MobileMenu imported and rendered
grep "import.*MobileMenu" src/components/ui-v8/navigation/AppShell.tsx
grep "<MobileMenu" src/components/ui-v8/navigation/AppShell.tsx

# Verify no placeholder comments remain
! grep -i "placeholder" src/components/ui-v8/navigation/AppShell.tsx || echo "Found placeholder - should be removed"

# Full build
pnpm build
```
</verification>

<success_criteria>
- AppShell imports and renders Header, BottomNav, MobileMenu
- Header onMenuClick opens MobileMenu
- MobileMenu closes via onClose callback
- No placeholder divs remain in AppShell
- Content padding accounts for fixed header (72px top) and bottom nav (64px mobile)
- pnpm typecheck and pnpm build pass
</success_criteria>

<output>
After completion, create `.planning/phases/03-navigation-layout/03-05-SUMMARY.md`
</output>
