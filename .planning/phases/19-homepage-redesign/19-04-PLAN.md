---
phase: 19-homepage-redesign
plan: 04
type: execute
wave: 3
depends_on: ["19-01", "19-02", "19-03"]
files_modified:
  - src/components/homepage/HomePageClient.tsx
  - src/components/homepage/Hero.tsx
  - public/videos/.gitkeep
autonomous: false

must_haves:
  truths:
    - "Homepage uses new HeroVideo component"
    - "Section order: Hero -> How It Works -> Menu -> Testimonials -> CTA -> Footer"
    - "SectionNavDots shows on right side (desktop)"
    - "All sections have consistent scroll choreography"
    - "Scroll snap works on desktop only"
  artifacts:
    - path: "src/components/homepage/HomePageClient.tsx"
      provides: "Recomposed homepage with all new sections"
      contains: "HowItWorksSection"
    - path: "src/components/homepage/Hero.tsx"
      provides: "Updated hero using HeroVideo"
      contains: "HeroVideo"
    - path: "public/videos/.gitkeep"
      provides: "Placeholder for video files"
  key_links:
    - from: "src/components/homepage/HomePageClient.tsx"
      to: "SectionNavDots"
      via: "import and render"
      pattern: "SectionNavDots"
    - from: "src/components/homepage/HomePageClient.tsx"
      to: "HowItWorksSection"
      via: "import and render"
      pattern: "HowItWorksSection"
---

<objective>
Integrate all homepage components with video hero, section navigation, and scroll choreography.

Purpose: Compose the redesigned homepage with new section order, video hero, and coordinated scroll animations.
Output: Recomposed HomePageClient.tsx, updated Hero.tsx, scroll snap styling
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/19-homepage-redesign/19-CONTEXT.md
@.planning/phases/19-homepage-redesign/19-01-SUMMARY.md
@.planning/phases/19-homepage-redesign/19-02-SUMMARY.md
@.planning/phases/19-homepage-redesign/19-03-SUMMARY.md
@src/components/homepage/HomePageClient.tsx
@src/components/homepage/Hero.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Hero with Video Component</name>
  <files>src/components/homepage/Hero.tsx, public/videos/.gitkeep</files>
  <action>
Update Hero.tsx to use HeroVideo component per CONTEXT decisions:

**Changes:**
1. Import HeroVideo from './HeroVideo'
2. Replace ParallaxContainer/WebGL/3D layers with HeroVideo
3. Keep: AnimatedHeadline, StatItem bar, CTAs, scroll indicator
4. Move content overlay inside HeroVideo children

**New structure:**
```typescript
<HeroVideo
  desktopSrc="/videos/hero-desktop.webm"
  mobileSrc="/videos/hero-mobile.webm"
  poster="/images/hero-poster.jpg"
>
  {/* All overlay content moves here */}
  <div className="relative flex flex-col items-center justify-center min-h-[100svh] px-4 py-24">
    {/* Badge, Headline, Subheadline, CTAs, Stats */}
  </div>
</HeroVideo>
```

**Remove/Simplify:**
- Remove WebGL particle canvas
- Remove grain effect canvas
- Remove ParallaxContainer layers
- Remove Hero3DSection (3D moves to menu page in future phase)
- Remove FloatingFood import (keep component file for now)
- Keep BrandMascot integration

**Props update:**
- Remove show3D prop (no longer relevant)
- Keep showParticles but make it conditional for future
- Update showFloatingFood to false by default

**Video placeholder:**
- Create public/videos/.gitkeep
- Use existing hero-poster.jpg or similar as poster
- Videos will be generated separately via Remotion (not in this phase)

**For now, until videos exist:**
- If video files don't exist, fall back to existing gradient background
- Check with: `desktopSrc && mobileSrc ? <HeroVideo> : <fallback>`

**Dark dramatic mood per CONTEXT:**
- Background: dark gradient as fallback
- Text: white/light colors
- Gradient overlay: from-black/60 for readability
  </action>
  <verify>
Hero renders with HeroVideo component (or fallback if videos missing).
Overlay content (headline, CTAs, stats) positioned correctly.
No console errors.
  </verify>
  <done>
Hero.tsx updated to use HeroVideo, ready for video files.
  </done>
</task>

<task type="auto">
  <name>Task 2: Recompose HomePageClient</name>
  <files>src/components/homepage/HomePageClient.tsx</files>
  <action>
Recompose homepage with new section order and components per CONTEXT:

**New section order:**
1. Hero (with video)
2. HowItWorksSection (replaces Timeline + integrates Coverage)
3. Menu Section (existing HomepageMenuSection via menuSection prop)
4. TestimonialsCarousel
5. CTABanner
6. FooterCTA

**Imports to add:**
```typescript
import { HowItWorksSection } from "./HowItWorksSection";
import { TestimonialsCarousel } from "./TestimonialsCarousel";
import { CTABanner } from "./CTABanner";
import { SectionNavDots } from "@/components/scroll/SectionNavDots";
```

**Imports to remove:**
```typescript
// Remove: CoverageSection (integrated into HowItWorksSection)
// Remove: Timeline (replaced by HowItWorksSection)
```

**Section IDs for nav dots:**
```typescript
const sections = [
  { id: "hero", label: "Home" },
  { id: "how-it-works", label: "How It Works" },
  { id: "menu", label: "Menu" },
  { id: "testimonials", label: "Reviews" },
  { id: "cta", label: "Order" },
];
```

**Add section IDs to each section:**
- Hero already has implicit id (first section)
- <HowItWorksSection id="how-it-works" />
- Menu div: id="menu" (already exists)
- <TestimonialsCarousel id="testimonials" />
- <CTABanner id="cta" />
- Footer doesn't need nav dot

**Add SectionNavDots:**
```typescript
<SectionNavDots sections={sections} className="z-50" />
```

**Scroll snap (desktop only) per CONTEXT:**
Add to main container:
```typescript
<main className="md:snap-y md:snap-mandatory">
  {/* sections with snap-start */}
</main>
```
Each section gets: className="md:snap-start"

**Note:** Scroll snap is "desktop only" per CONTEXT - use md: prefix.
  </action>
  <verify>
Homepage renders all sections in correct order.
SectionNavDots appears on desktop right side.
Clicking dots scrolls to correct section.
Scroll snap works on desktop (sections snap to viewport).
  </verify>
  <done>
HomePageClient recomposed with new section order, SectionNavDots, and scroll snap.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete homepage redesign with:
- Video hero (or gradient fallback until videos exist)
- New section order: Hero -> How It Works -> Menu -> Testimonials -> CTA -> Footer
- Section navigation dots on desktop
- Scroll snap on desktop
- All scroll choreography (animations replay on scroll)
  </what-built>
  <how-to-verify>
1. Run `pnpm dev`
2. Navigate to http://localhost:3000
3. Verify section order (scroll down through homepage)
4. Check desktop: side navigation dots visible on right
5. Click each dot - should scroll to that section
6. Scroll through - animations should replay when sections re-enter viewport
7. Check mobile: dots should be hidden
8. On desktop: scroll should snap to sections
9. Check reduced motion: toggle in OS settings, animations should respect preference
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
- [ ] Hero uses HeroVideo component (or fallback)
- [ ] Section order: Hero -> How It Works -> Menu -> Testimonials -> CTA -> Footer
- [ ] SectionNavDots visible on desktop right side
- [ ] Clicking nav dots scrolls to correct section
- [ ] Hover on dots shows section label
- [ ] Scroll snap works on desktop
- [ ] Scroll animations replay on re-entry
- [ ] Mobile: no nav dots, no scroll snap
- [ ] CoverageSection removed (integrated into How It Works)
- [ ] Timeline removed (replaced by HowItWorksSection)
- [ ] `pnpm typecheck` passes
- [ ] `pnpm lint` passes
- [ ] `pnpm build` succeeds
</verification>

<success_criteria>
Homepage redesign complete with new structure, video hero readiness, section navigation, and scroll choreography.
User approved visual/functional verification.
</success_criteria>

<output>
After completion, create `.planning/phases/19-homepage-redesign/19-04-SUMMARY.md`
</output>
