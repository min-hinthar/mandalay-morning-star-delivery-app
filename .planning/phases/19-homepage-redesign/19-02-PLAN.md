---
phase: 19-homepage-redesign
plan: 02
type: execute
wave: 2
depends_on: ["19-01"]
files_modified:
  - src/components/homepage/HowItWorksSection.tsx
  - src/components/homepage/TestimonialsCarousel.tsx
autonomous: true

must_haves:
  truths:
    - "How It Works shows 4 steps with Coverage as step 1"
    - "Step icons have continuous subtle motion"
    - "Connectors draw between steps on scroll"
    - "Testimonials auto-rotate through reviews"
    - "User can pause testimonials on hover/focus"
  artifacts:
    - path: "src/components/homepage/HowItWorksSection.tsx"
      provides: "4-step How It Works with integrated coverage"
      min_lines: 150
    - path: "src/components/homepage/TestimonialsCarousel.tsx"
      provides: "Auto-rotating testimonials carousel"
      min_lines: 100
  key_links:
    - from: "src/components/homepage/HowItWorksSection.tsx"
      to: "AnimatedSection"
      via: "wrapper import"
      pattern: "AnimatedSection|itemVariants"
    - from: "src/components/homepage/TestimonialsCarousel.tsx"
      to: "setInterval"
      via: "auto-rotation timer"
      pattern: "setInterval|setTimeout"
---

<objective>
Create How It Works section with integrated Coverage step and auto-rotating Testimonials carousel.

Purpose: Redesign How It Works to include Coverage check as natural first step, and add testimonials for social proof.
Output: HowItWorksSection.tsx (4 steps), TestimonialsCarousel.tsx (auto-rotating reviews)
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/19-homepage-redesign/19-CONTEXT.md
@.planning/phases/19-homepage-redesign/19-RESEARCH.md
@.planning/phases/19-homepage-redesign/19-01-SUMMARY.md
@src/components/homepage/Timeline.tsx
@src/components/homepage/CoverageSection.tsx
@src/components/scroll/AnimatedSection.tsx
@src/lib/motion-tokens.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create HowItWorksSection Component</name>
  <files>src/components/homepage/HowItWorksSection.tsx</files>
  <action>
Create new How It Works section that replaces both Timeline.tsx and integrates Coverage:

**4 Steps per CONTEXT:**
1. Check Coverage - "Enter your address to see if we deliver" (MapPin icon)
2. Order - "Browse menu and add favorites to cart" (UtensilsCrossed icon)
3. Track - "Real-time updates on your order" (Truck icon)
4. Enjoy - "Fresh Burmese cuisine at your door" (Sparkles icon)

**Layout:**
- Desktop: Horizontal with connecting line between steps
- Mobile: Vertical timeline layout
- Each step: Icon (with continuous float/pulse), Title, Description

**Animations per CONTEXT:**
- Use AnimatedSection wrapper (from 19-01) for section-level reveal
- Icons have continuous subtle motion: floatGentle from motion-tokens
- Connectors (line between steps) draw on scroll using pathLength animation
- Step-by-step reveal with interactive scroll highlighting

**Icon Animation Pattern:**
```typescript
<motion.div
  animate={{ y: [0, -8, 0], rotate: [0, 2, 0] }}
  transition={{ duration: 4, repeat: Infinity, ease: "easeInOut" }}
>
  <IconComponent />
</motion.div>
```

**Connector Line:**
```typescript
<motion.div
  className="h-1 bg-gradient-to-r from-primary to-secondary"
  initial={{ scaleX: 0 }}
  whileInView={{ scaleX: 1 }}
  viewport={{ once: false }}
  transition={{ duration: 0.8, ease: "easeOut" }}
  style={{ transformOrigin: "left" }}
/>
```

Use itemVariants from AnimatedSection for staggered step reveals.
Colors: Use existing brand tokens (primary, secondary, green, accent-orange for each step).
  </action>
  <verify>
Component renders 4 steps horizontally on desktop, vertically on mobile.
Icons have continuous subtle motion.
Connector lines animate on scroll.
  </verify>
  <done>
HowItWorksSection exists with 4 animated steps, floating icons, and drawing connectors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create TestimonialsCarousel Component</name>
  <files>src/components/homepage/TestimonialsCarousel.tsx</files>
  <action>
Create auto-rotating testimonials carousel per CONTEXT:

**Static testimonials data (hardcoded array):**
```typescript
const testimonials = [
  {
    id: 1,
    name: "Sarah M.",
    location: "Pasadena, CA",
    rating: 5,
    text: "The Tea Leaf Salad is exactly like what I had in Yangon. So authentic!",
    avatar: null, // Use initials
  },
  // Add 4-5 more testimonials
];
```

**Features:**
- Auto-rotate every 5 seconds
- Pause on hover or focus (accessibility)
- Resume on mouse leave / blur
- Dot indicators showing current testimonial
- Smooth crossfade transition between testimonials

**Layout:**
- Centered card with quote
- Star rating display (use Star icon from lucide)
- Name + Location below quote
- Avatar circle with initials (first letter of first + last name)
- Dot navigation at bottom

**Animation:**
```typescript
<AnimatePresence mode="wait">
  <motion.div
    key={currentIndex}
    initial={{ opacity: 0, x: 20 }}
    animate={{ opacity: 1, x: 0 }}
    exit={{ opacity: 0, x: -20 }}
    transition={{ duration: 0.3 }}
  >
    {/* Testimonial content */}
  </motion.div>
</AnimatePresence>
```

**Auto-rotation with pause:**
```typescript
useEffect(() => {
  if (isPaused) return;
  const interval = setInterval(() => {
    setCurrentIndex((prev) => (prev + 1) % testimonials.length);
  }, 5000);
  return () => clearInterval(interval);
}, [isPaused]);
```

Use useAnimationPreference - if reduced motion, disable auto-rotation (manual dots only).
  </action>
  <verify>
Carousel auto-rotates through testimonials.
Pauses on hover, resumes on leave.
Dot indicators show current position and are clickable.
  </verify>
  <done>
TestimonialsCarousel exists with auto-rotation, pause-on-hover, and dot navigation.
  </done>
</task>

</tasks>

<verification>
- [ ] HowItWorksSection shows 4 steps with correct icons and content
- [ ] Step icons have continuous floating animation
- [ ] Connector lines draw on scroll into view
- [ ] Desktop layout is horizontal, mobile is vertical
- [ ] TestimonialsCarousel auto-rotates every 5 seconds
- [ ] Testimonials pause on hover/focus
- [ ] Dot indicators show current testimonial
- [ ] Clicking dot navigates to that testimonial
- [ ] Reduced motion preference disables auto-rotation
- [ ] `pnpm typecheck` passes
- [ ] `pnpm lint` passes
</verification>

<success_criteria>
HowItWorksSection and TestimonialsCarousel components are complete and ready for homepage integration.
Both components use scroll infrastructure from 19-01 where applicable.
</success_criteria>

<output>
After completion, create `.planning/phases/19-homepage-redesign/19-02-SUMMARY.md`
</output>
