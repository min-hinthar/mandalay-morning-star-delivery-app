---
phase: 19-homepage-redesign
plan: 03
type: execute
wave: 2
depends_on: ["19-01"]
files_modified:
  - src/components/homepage/CTABanner.tsx
  - src/components/homepage/FooterCTA.tsx
autonomous: true

must_haves:
  truths:
    - "CTA Banner floats up on scroll into view"
    - "CTA Banner has pulsing glow border"
    - "Footer columns stagger in on scroll"
    - "Footer animations replay on re-entry"
  artifacts:
    - path: "src/components/homepage/CTABanner.tsx"
      provides: "Floating promo banner with glow"
      min_lines: 60
    - path: "src/components/homepage/FooterCTA.tsx"
      provides: "Enhanced footer with staggered reveals"
      contains: "staggerChildren"
  key_links:
    - from: "src/components/homepage/CTABanner.tsx"
      to: "motion.div"
      via: "framer-motion"
      pattern: "whileInView"
    - from: "src/components/homepage/FooterCTA.tsx"
      to: "AnimatedSection"
      via: "wrapper or variants"
      pattern: "staggerContainer|AnimatedSection"
---

<objective>
Create CTA Banner with floating entrance and enhance Footer with staggered column reveals.

Purpose: Add promotional banner with attention-grabbing animation and upgrade footer with scroll-triggered animations.
Output: CTABanner.tsx (floating + glow), enhanced FooterCTA.tsx (staggered columns)
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/19-homepage-redesign/19-CONTEXT.md
@.planning/phases/19-homepage-redesign/19-01-SUMMARY.md
@src/components/homepage/FooterCTA.tsx
@src/components/scroll/AnimatedSection.tsx
@src/lib/motion-tokens.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CTABanner Component</name>
  <files>src/components/homepage/CTABanner.tsx</files>
  <action>
Create promotional CTA banner with enhanced animations per CONTEXT:

**Content:**
- Headline: "Order by Friday 3pm for Saturday Delivery"
- Subtext: "Fresh homemade Burmese dishes, delivered to your door"
- CTA Button: "Order Now" linking to /menu
- Optional promo badge: "Free delivery over $100"

**Layout:**
- Full-width section with gradient background (primary to primary-hover)
- Centered content with max-width constraint
- Responsive padding

**Animations per CONTEXT:**
1. **Floating entrance:** Floats up from below with subtle shadow increase
```typescript
<motion.div
  initial={{ opacity: 0, y: 40, boxShadow: "0 0 0 rgba(0,0,0,0)" }}
  whileInView={{
    opacity: 1,
    y: 0,
    boxShadow: "0 20px 40px rgba(0,0,0,0.15)",
  }}
  viewport={{ once: false, amount: 0.5 }}
  transition={{ duration: 0.5, ease: [0.2, 0.9, 0.3, 1] }}
>
```

2. **Pulsing glow border:** Infinite subtle glow animation
```typescript
<motion.div
  className="absolute inset-0 rounded-2xl"
  animate={{
    boxShadow: [
      "0 0 0 0 rgba(235, 205, 0, 0)",
      "0 0 20px 4px rgba(235, 205, 0, 0.3)",
      "0 0 0 0 rgba(235, 205, 0, 0)",
    ],
  }}
  transition={{ duration: 2, repeat: Infinity }}
/>
```

**Structure:**
- Outer container with gradient bg
- Inner card with rounded corners and the glow border
- Content: badge, headline, subtext, CTA button
- Button uses existing Button component with whileHover/whileTap

Use useAnimationPreference - disable glow animation if reduced motion.
  </action>
  <verify>
Banner floats up when scrolled into view.
Glow border pulses continuously.
CTA button links to /menu.
  </verify>
  <done>
CTABanner exists with floating entrance animation and pulsing glow border.
  </done>
</task>

<task type="auto">
  <name>Task 2: Enhance FooterCTA with Staggered Animations</name>
  <files>src/components/homepage/FooterCTA.tsx</files>
  <action>
Update existing FooterCTA.tsx with enhanced scroll animations per CONTEXT:

**Changes to make:**

1. **Top CTA Section** - Keep existing content but add floating entrance:
- Use whileInView with initial/animate pattern
- Add staggerChildren for headline -> subtext -> buttons

2. **Bottom Info Section** - Add staggered column reveals:
- Wrap each column (Contact, Hours, Social) in motion.div
- Use staggerContainer pattern with delayChildren
- Each column animates from opacity 0, y: 24 to visible
- Stagger delay: 50ms per column

3. **Use AnimatedSection or equivalent pattern:**
```typescript
const columnVariants = {
  hidden: { opacity: 0, y: 24 },
  visible: (i: number) => ({
    opacity: 1,
    y: 0,
    transition: { delay: i * 0.1, duration: 0.4, ease: [0.2, 0.9, 0.3, 1] },
  }),
};

// Usage:
<motion.div
  custom={0}
  variants={columnVariants}
  initial="hidden"
  whileInView="visible"
  viewport={{ once: false, amount: 0.3 }}
>
```

4. **Replace v6 motion imports with motion-tokens:**
- Remove: v6StaggerItem, v6ViewportOnce, v6Spring
- Use: staggerContainer, staggerItem, spring from @/lib/motion-tokens

5. **Always replay:** Change viewport.once to false for all whileInView animations

6. **Copyright line:** Subtle fade-in last (after columns)

Keep all existing content and links, only enhance with animations.
  </action>
  <verify>
Footer columns stagger in when scrolled into view.
Animations replay when scrolling back up and down.
No v6 motion imports remain.
All links still work correctly.
  </verify>
  <done>
FooterCTA enhanced with staggered column reveals that replay on scroll.
  </done>
</task>

</tasks>

<verification>
- [ ] CTABanner floats up with shadow on scroll into view
- [ ] CTABanner glow border pulses continuously
- [ ] CTABanner button links to /menu
- [ ] Footer columns stagger in (Contact -> Hours -> Social)
- [ ] Footer animations replay when re-entering viewport
- [ ] v6 motion imports removed from FooterCTA
- [ ] All footer links work correctly
- [ ] Reduced motion preference respected
- [ ] `pnpm typecheck` passes
- [ ] `pnpm lint` passes
</verification>

<success_criteria>
CTABanner and enhanced FooterCTA ready for homepage integration.
Both components have scroll-triggered animations that replay.
</success_criteria>

<output>
After completion, create `.planning/phases/19-homepage-redesign/19-03-SUMMARY.md`
</output>
