---
phase: 26-component-consolidation
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/Toast.tsx
  - src/components/ui/ToastProvider.tsx
  - src/components/ui/Tooltip.tsx
  - src/components/ui/Dropdown.tsx
autonomous: true

must_haves:
  truths:
    - "V8 Toast is declarative only (no imperative toast() function)"
    - "V8 Tooltip has delay support and keyboard accessibility"
    - "Dropdown component available in ui/"
    - "Old Radix toast.tsx and toaster.tsx removed"
  artifacts:
    - path: "src/components/ui/Toast.tsx"
      provides: "Declarative Toast component"
      min_lines: 50
    - path: "src/components/ui/ToastProvider.tsx"
      provides: "Toast context provider"
    - path: "src/components/ui/Tooltip.tsx"
      provides: "V8 Tooltip with delayDuration and keyboard support"
      contains: "delayDuration"
    - path: "src/components/ui/Dropdown.tsx"
      provides: "Dropdown component from ui-v8"
  key_links:
    - from: "src/components/ui/ToastProvider.tsx"
      to: "src/components/ui/Toast.tsx"
      via: "component usage"
      pattern: "Toast"
---

<objective>
Migrate Toast, Tooltip, and Dropdown from ui-v8/ to ui/.

Purpose: Complete overlay component migration with declarative Toast, enhanced Tooltip, and Dropdown.
Output: Toast (declarative only), Tooltip, and Dropdown in ui/, old Radix implementations removed.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-component-consolidation/26-CONTEXT.md
@.planning/phases/26-component-consolidation/26-RESEARCH.md
@src/components/ui-v8/Toast.tsx
@src/components/ui-v8/ToastProvider.tsx
@src/components/ui-v8/Tooltip.tsx
@src/components/ui-v8/Dropdown.tsx
@src/components/ui/toast.tsx
@src/components/ui/toaster.tsx
@src/components/ui/tooltip.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Toast and ToastProvider</name>
  <files>src/components/ui/Toast.tsx, src/components/ui/ToastProvider.tsx</files>
  <action>
1. Remove Radix-based toast files:
   ```bash
   git rm src/components/ui/toast.tsx
   git rm src/components/ui/toaster.tsx
   ```

2. Move V8 Toast and ToastProvider:
   ```bash
   git mv src/components/ui-v8/Toast.tsx src/components/ui/Toast.tsx
   git mv src/components/ui-v8/ToastProvider.tsx src/components/ui/ToastProvider.tsx
   ```

3. **CRITICAL**: Per CONTEXT.md, Toast must be declarative only. Check if V8 Toast has imperative `toast()` function and REMOVE it:
   - If useToastV8 exports `toast()` function, remove that export
   - Keep only the `<Toast />` component and `<ToastProvider />`
   - If toast state management is needed, expose via context hook like `useToastContext()` that returns `{ showToast, toasts }` — NOT a standalone `toast()` function

4. Update any ui-v8 imports to relative ui/ paths.

5. Ensure ToastProvider wraps Toast rendering internally or exposes proper context.
  </action>
  <verify>
- src/components/ui/Toast.tsx exists
- src/components/ui/ToastProvider.tsx exists
- toast.tsx (lowercase, Radix) deleted
- toaster.tsx deleted
- No imperative `toast()` function exported (grep for "export.*toast\(" should find nothing)
  </verify>
  <done>V8 Toast migrated, Radix implementation removed, declarative-only API enforced</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Tooltip</name>
  <files>src/components/ui/Tooltip.tsx</files>
  <action>
1. Remove CSS-only tooltip:
   ```bash
   git rm src/components/ui/tooltip.tsx
   ```

2. Move V8 Tooltip:
   ```bash
   git mv src/components/ui-v8/Tooltip.tsx src/components/ui/Tooltip.tsx
   ```

3. Update any ui-v8 imports to relative ui/ paths.

4. Ensure Tooltip exports match expected API:
   - `Tooltip` - main component
   - `TooltipTrigger` - trigger element wrapper
   - `TooltipContent` - content wrapper
   - `TooltipProvider` - context provider (if needed)
  </action>
  <verify>
- src/components/ui/Tooltip.tsx exists with V8 implementation
- tooltip.tsx (lowercase, CSS-only) deleted
- Tooltip has delayDuration prop
  </verify>
  <done>V8 Tooltip migrated with delay and keyboard support</done>
</task>

<task type="auto">
  <name>Task 3: Migrate Dropdown</name>
  <files>src/components/ui/Dropdown.tsx</files>
  <action>
1. Move V8 Dropdown:
   ```bash
   git mv src/components/ui-v8/Dropdown.tsx src/components/ui/Dropdown.tsx
   ```

2. Update any ui-v8 imports to relative ui/ paths.

3. Verify Dropdown doesn't conflict with existing dropdown-menu.tsx (they serve different purposes — Dropdown is simpler, DropdownMenu is Radix-based with more features). Both can coexist.
  </action>
  <verify>
- src/components/ui/Dropdown.tsx exists
- No import conflicts
  </verify>
  <done>V8 Dropdown migrated to ui/</done>
</task>

</tasks>

<verification>
```bash
# Check files exist
ls src/components/ui/Toast.tsx src/components/ui/ToastProvider.tsx src/components/ui/Tooltip.tsx src/components/ui/Dropdown.tsx

# Check deleted files gone
ls src/components/ui/toast.tsx 2>&1 | grep -q "No such file" && echo "OK: radix toast deleted"
ls src/components/ui/toaster.tsx 2>&1 | grep -q "No such file" && echo "OK: toaster deleted"
ls src/components/ui/tooltip.tsx 2>&1 | grep -q "No such file" && echo "OK: css tooltip deleted"

# No imperative toast function
grep -r "export.*function toast" src/components/ui/ && echo "ERROR: imperative toast found" || echo "OK: no imperative toast"

# TypeScript check
pnpm typecheck
```
</verification>

<success_criteria>
- Toast.tsx, ToastProvider.tsx, Tooltip.tsx, Dropdown.tsx exist in ui/
- Old toast.tsx, toaster.tsx, tooltip.tsx deleted
- Toast is declarative only (no imperative toast() export)
- Tooltip has delayDuration support
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/26-component-consolidation/26-03-SUMMARY.md`
</output>
