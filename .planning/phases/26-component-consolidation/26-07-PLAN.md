---
phase: 26-component-consolidation
plan: 07
type: execute
wave: 3
depends_on: ["26-04", "26-05", "26-06"]
files_modified:
  - src/components/ui/index.ts
  - src/app/providers.tsx
  - src/app/(public)/menu/page.tsx
  - src/components/homepage/HomepageMenuSection.tsx
  - src/components/checkout/AddressStepV8.tsx
  - src/components/menu/menu-header.tsx
  - src/components/menu/menu-skeleton.tsx
  - src/components/menu/UnifiedMenuItemCard/UnifiedMenuItemCard.tsx
  - src/components/menu/UnifiedMenuItemCard/CardImage.tsx
  - src/components/menu/UnifiedMenuItemCard/AddButton.tsx
autonomous: true

must_haves:
  truths:
    - "All 16 consumer files updated to import from ui/ instead of ui-v8/"
    - "Component names use clean names (CartBar not CartBarV8)"
    - "Main ui/index.ts exports all new subdirectory components"
    - "No TypeScript errors from import changes"
  artifacts:
    - path: "src/components/ui/index.ts"
      provides: "Updated barrel export including cart, menu, navigation, scroll, transitions"
      contains: "from \"./cart\""
  key_links:
    - from: "src/app/providers.tsx"
      to: "src/components/ui"
      via: "import"
      pattern: "from \"@/components/ui\""
    - from: "src/app/(public)/menu/page.tsx"
      to: "src/components/ui/menu"
      via: "import"
      pattern: "from \"@/components/ui"
---

<objective>
Update all consumer imports and create unified barrel export.

Purpose: Update all files that import from ui-v8 to use ui/, update component names to clean versions.
Output: All imports consolidated to ui/, unified barrel export, no ui-v8 imports remain.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-component-consolidation/26-CONTEXT.md
@.planning/phases/26-component-consolidation/26-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update main ui/index.ts barrel export</name>
  <files>src/components/ui/index.ts</files>
  <action>
Update src/components/ui/index.ts to:

1. **Remove exports for deleted files:**
   - Remove OverlayBase, Modal, BottomSheet, SideDrawer from overlay-base.tsx
   - Remove Radix Drawer exports
   - Remove Radix Toast/Toaster exports
   - Remove CSS Tooltip exports

2. **Add new overlay exports:**
   ```typescript
   // Overlays (V8)
   export { Portal } from "./Portal";
   export { Backdrop } from "./Backdrop";
   export { Modal, useModal, ModalHeader, ModalBody, ModalFooter } from "./Modal";
   export type { ModalProps } from "./Modal";
   export { Drawer, BottomSheet } from "./Drawer";
   export type { DrawerProps } from "./Drawer";
   export { Dropdown } from "./Dropdown";
   export { Toast } from "./Toast";
   export { ToastProvider } from "./ToastProvider";
   export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider } from "./Tooltip";
   ```

3. **Add subdirectory re-exports:**
   ```typescript
   // Cart components
   export * from "./cart";

   // Menu components
   export * from "./menu";

   // Navigation components
   export * from "./navigation";

   // Scroll components
   export * from "./scroll";

   // Transitions
   export * from "./transitions";
   ```

Keep all existing exports that weren't replaced (Button, Badge, Card, Input, Form components, etc.).
  </action>
  <verify>
- index.ts exports Portal, Backdrop, Modal, Drawer, BottomSheet, Toast, Tooltip
- index.ts re-exports from ./cart, ./menu, ./navigation, ./scroll, ./transitions
- No exports from overlay-base.tsx, drawer.tsx (vaul), toast.tsx (radix), toaster.tsx
  </verify>
  <done>Main barrel export updated with all new components and subdirectories</done>
</task>

<task type="auto">
  <name>Task 2: Update consumer imports in app files</name>
  <files>src/app/providers.tsx, src/app/(public)/menu/page.tsx</files>
  <action>
**providers.tsx:**
- FROM: `import { CartBarV8, CartDrawerV8, FlyToCart } from "@/components/ui-v8/cart"`
- TO: `import { CartBar, CartDrawer, FlyToCart } from "@/components/ui"`
- Update JSX: `<CartBarV8>` -> `<CartBar>`, `<CartDrawerV8>` -> `<CartDrawer>`

**menu/page.tsx:**
- FROM: `import { MenuContentV8, MenuSkeletonV8 } from "@/components/ui-v8/menu"`
- TO: `import { MenuContent, MenuSkeleton } from "@/components/ui"`
- Update JSX: `<MenuContentV8>` -> `<MenuContent>`, `<MenuSkeletonV8>` -> `<MenuSkeleton>`
  </action>
  <verify>
- No ui-v8 imports in providers.tsx or menu/page.tsx
- No V8 suffix in JSX component usage
  </verify>
  <done>App-level consumer imports updated to use clean names from ui/</done>
</task>

<task type="auto">
  <name>Task 3: Update remaining consumer imports</name>
  <files>Multiple component files</files>
  <action>
Update all remaining files that import from ui-v8:

**components/homepage/HomepageMenuSection.tsx:**
- FROM: `import { ItemDetailSheetV8 } from "@/components/ui-v8/menu"`
- TO: `import { ItemDetailSheet } from "@/components/ui"`
- Update JSX

**components/checkout/AddressStepV8.tsx:**
- FROM: `import { Modal, BottomSheet } from "@/components/ui-v8"`
- TO: `import { Modal, Drawer } from "@/components/ui"` (BottomSheet -> Drawer with position="bottom")
- Update JSX: `<BottomSheet>` -> `<Drawer position="bottom">`

**components/menu/menu-header.tsx:**
- FROM: `import { CartButtonV8 } from "@/components/ui-v8/cart"`
- TO: `import { CartButton } from "@/components/ui"`
- Update JSX

**components/menu/menu-skeleton.tsx:**
- FROM: `import { MenuItemCardV8Skeleton } from "@/components/ui-v8/menu"`
- TO: `import { MenuItemCardSkeleton } from "@/components/ui"`
- Update JSX

**components/menu/UnifiedMenuItemCard/UnifiedMenuItemCard.tsx:**
- FROM: `import { FavoriteButton } from "@/components/ui-v8/menu"`
- TO: `import { FavoriteButton } from "@/components/ui"`

**components/menu/UnifiedMenuItemCard/CardImage.tsx:**
- FROM: `import { getCategoryEmoji } from "@/components/ui-v8/menu"`
- TO: `import { getCategoryEmoji } from "@/components/ui"`

**components/menu/UnifiedMenuItemCard/AddButton.tsx:**
- FROM: `import { QuantitySelector, useFlyToCart } from "@/components/ui-v8/cart"`
- TO: `import { QuantitySelector } from "@/components/ui"` and `import { useFlyToCart } from "@/components/ui/cart/FlyToCart"` (or via barrel)
  </action>
  <verify>
- grep -r "ui-v8" src/components/ returns no matches
- grep -r "V8" src/components/*.tsx returns no component name matches
  </verify>
  <done>All consumer imports updated to ui/ with clean component names</done>
</task>

</tasks>

<verification>
```bash
# No ui-v8 imports anywhere in src/
grep -r "ui-v8" src/ --include="*.tsx" --include="*.ts" && echo "ERROR: ui-v8 imports found" || echo "OK: no ui-v8 imports"

# TypeScript check
pnpm typecheck

# Build check
pnpm build
```
</verification>

<success_criteria>
- Main barrel export includes all new components
- All 16 consumer files updated
- No ui-v8 imports in src/
- Component names are clean (no V8 suffix in JSX)
- TypeScript passes
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/26-component-consolidation/26-07-SUMMARY.md`
</output>
