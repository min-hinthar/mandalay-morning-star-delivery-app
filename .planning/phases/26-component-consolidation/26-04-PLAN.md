---
phase: 26-component-consolidation
plan: 04
type: execute
wave: 2
depends_on: ["26-02", "26-03"]
files_modified:
  - src/components/ui/cart/AddToCartButton.tsx
  - src/components/ui/cart/CartBar.tsx
  - src/components/ui/cart/CartButton.tsx
  - src/components/ui/cart/CartDrawer.tsx
  - src/components/ui/cart/CartEmptyState.tsx
  - src/components/ui/cart/CartItem.tsx
  - src/components/ui/cart/CartSummary.tsx
  - src/components/ui/cart/ClearCartConfirmation.tsx
  - src/components/ui/cart/FlyToCart.tsx
  - src/components/ui/cart/QuantitySelector.tsx
  - src/components/ui/cart/index.ts
autonomous: true

must_haves:
  truths:
    - "All cart components moved from ui-v8/cart to ui/cart"
    - "V8 suffixes removed from component names (CartBarV8 -> CartBar)"
    - "Cart components use relative ui/ imports for overlays"
  artifacts:
    - path: "src/components/ui/cart/CartBar.tsx"
      provides: "Cart bar component (renamed from CartBarV8)"
    - path: "src/components/ui/cart/CartButton.tsx"
      provides: "Cart button (renamed from CartButtonV8)"
    - path: "src/components/ui/cart/CartDrawer.tsx"
      provides: "Cart drawer (renamed from CartDrawerV8)"
    - path: "src/components/ui/cart/CartItem.tsx"
      provides: "Cart item (renamed from CartItemV8)"
    - path: "src/components/ui/cart/index.ts"
      provides: "Barrel export for cart components"
  key_links:
    - from: "src/components/ui/cart/CartDrawer.tsx"
      to: "src/components/ui/Drawer.tsx"
      via: "import"
      pattern: "import.*Drawer.*from"
    - from: "src/components/ui/cart/ClearCartConfirmation.tsx"
      to: "src/components/ui/Modal.tsx"
      via: "import"
      pattern: "import.*Modal.*from"
---

<objective>
Migrate cart components from ui-v8/cart/ to ui/cart/ with name cleanup.

Purpose: Move all cart-related components, remove V8 suffixes, update internal imports.
Output: Clean cart components in ui/cart/ with proper barrel export.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-component-consolidation/26-CONTEXT.md
@.planning/phases/26-component-consolidation/26-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ui/cart directory and move components</name>
  <files>src/components/ui/cart/</files>
  <action>
1. Create cart directory in ui/:
   ```bash
   mkdir -p src/components/ui/cart
   ```

2. Move all cart components with git mv:
   ```bash
   git mv src/components/ui-v8/cart/AddToCartButton.tsx src/components/ui/cart/
   git mv src/components/ui-v8/cart/CartEmptyState.tsx src/components/ui/cart/
   git mv src/components/ui-v8/cart/CartSummary.tsx src/components/ui/cart/
   git mv src/components/ui-v8/cart/FlyToCart.tsx src/components/ui/cart/
   git mv src/components/ui-v8/cart/QuantitySelector.tsx src/components/ui/cart/
   ```

3. Move and rename V8-suffixed components:
   ```bash
   git mv src/components/ui-v8/cart/CartBarV8.tsx src/components/ui/cart/CartBar.tsx
   git mv src/components/ui-v8/cart/CartButtonV8.tsx src/components/ui/cart/CartButton.tsx
   git mv src/components/ui-v8/cart/CartDrawerV8.tsx src/components/ui/cart/CartDrawer.tsx
   git mv src/components/ui-v8/cart/CartItemV8.tsx src/components/ui/cart/CartItem.tsx
   git mv src/components/ui-v8/cart/ClearCartConfirmation.tsx src/components/ui/cart/
   ```

4. If ui-v8/cart/index.ts exists, move it:
   ```bash
   git mv src/components/ui-v8/cart/index.ts src/components/ui/cart/index.ts 2>/dev/null || echo "No index.ts to move"
   ```
  </action>
  <verify>
- All files exist in src/components/ui/cart/
- src/components/ui-v8/cart/ is empty or deleted
  </verify>
  <done>Cart components moved to ui/cart/ with V8 suffix removed from filenames</done>
</task>

<task type="auto">
  <name>Task 2: Update component names and imports inside cart files</name>
  <files>src/components/ui/cart/*.tsx</files>
  <action>
For each moved file, update:

1. **Component export names** (remove V8 suffix):
   - `CartBarV8` -> `CartBar`
   - `CartButtonV8` -> `CartButton`
   - `CartDrawerV8` -> `CartDrawer`
   - `CartItemV8` -> `CartItem`

2. **Internal imports** from ui-v8 to ui:
   - FROM: `from "@/components/ui-v8/Modal"` or `from "@/components/ui-v8/BottomSheet"` or `from "@/components/ui-v8/Drawer"`
   - TO: `from "@/components/ui"` (or relative paths)

3. **Cross-references within cart**:
   - Update any imports between cart components to use clean names

4. **BottomSheet -> Drawer migration**:
   - In CartDrawerV8 (now CartDrawer.tsx), it imports BottomSheet
   - Change to: `import { Drawer } from "@/components/ui"` and use `<Drawer position="bottom" ...>`
  </action>
  <verify>
- No "V8" in component names within cart files
- No imports from "@/components/ui-v8"
  </verify>
  <done>Cart component names and imports cleaned up</done>
</task>

<task type="auto">
  <name>Task 3: Create or update cart barrel export</name>
  <files>src/components/ui/cart/index.ts</files>
  <action>
Create (or update if moved) index.ts in ui/cart/:

```typescript
// Cart Components
export { AddToCartButton } from "./AddToCartButton";
export { CartBar } from "./CartBar";
export { CartButton } from "./CartButton";
export { CartDrawer } from "./CartDrawer";
export { CartEmptyState } from "./CartEmptyState";
export { CartItem } from "./CartItem";
export { CartSummary } from "./CartSummary";
export { ClearCartConfirmation } from "./ClearCartConfirmation";
export { FlyToCart, useFlyToCart } from "./FlyToCart";
export { QuantitySelector } from "./QuantitySelector";

// Type exports if any
export type { AddToCartButtonProps } from "./AddToCartButton";
export type { CartBarProps } from "./CartBar";
export type { CartButtonProps } from "./CartButton";
export type { CartDrawerProps } from "./CartDrawer";
export type { CartItemProps } from "./CartItem";
export type { QuantitySelectorProps } from "./QuantitySelector";
```

Adjust based on what types are actually exported from each file.
  </action>
  <verify>
- src/components/ui/cart/index.ts exists
- All cart components exported
  </verify>
  <done>Cart barrel export created with clean names</done>
</task>

</tasks>

<verification>
```bash
# Check directory structure
ls src/components/ui/cart/

# Check no V8 in component names
grep -r "export.*V8" src/components/ui/cart/ && echo "ERROR: V8 suffix found" || echo "OK: no V8 suffix"

# Check no ui-v8 imports
grep -r "ui-v8" src/components/ui/cart/ && echo "ERROR: ui-v8 import found" || echo "OK: no ui-v8 imports"

# TypeScript check
pnpm typecheck
```
</verification>

<success_criteria>
- All 10 cart components in ui/cart/
- No V8 suffix in component export names
- No imports from ui-v8
- Barrel export exists
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/26-component-consolidation/26-04-SUMMARY.md`
</output>
