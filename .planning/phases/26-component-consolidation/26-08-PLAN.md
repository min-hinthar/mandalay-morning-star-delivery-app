---
phase: 26-component-consolidation
plan: 08
type: execute
wave: 4
depends_on: ["26-07"]
files_modified:
  - eslint.config.mjs
  - src/components/ui-v8/ (deleted)
autonomous: true

must_haves:
  truths:
    - "ui-v8/ directory completely removed"
    - "ESLint rule prevents ui-v8 imports from being reintroduced"
    - "All tests pass"
    - "Build succeeds"
    - "No dead code from migration"
  artifacts:
    - path: "eslint.config.mjs"
      provides: "no-restricted-imports rule for ui-v8"
      contains: "ui-v8"
  key_links: []
---

<objective>
Delete ui-v8/ directory, add ESLint guard, run dead code detection, and final verification.

Purpose: Complete the consolidation by removing the old directory and preventing regression.
Output: Clean codebase with ui-v8 removed and guarded against recreation.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-component-consolidation/26-CONTEXT.md
@.planning/phases/26-component-consolidation/26-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete ui-v8/ directory</name>
  <files>src/components/ui-v8/</files>
  <action>
The directory should be empty after all migrations. Remove it:

```bash
# Verify empty (only overlay subdir might remain)
ls src/components/ui-v8/

# Remove the directory
git rm -r src/components/ui-v8/
```

If any files remain (missed during migration), either:
1. Move them to appropriate location in ui/
2. Delete if they're truly unused
  </action>
  <verify>
- `ls src/components/ui-v8/` returns "No such file or directory"
- git status shows ui-v8 deleted
  </verify>
  <done>ui-v8/ directory completely removed</done>
</task>

<task type="auto">
  <name>Task 2: Add ESLint guard for ui-v8 imports</name>
  <files>eslint.config.mjs</files>
  <action>
Add no-restricted-imports rule to prevent ui-v8 from being recreated or imported:

In eslint.config.mjs, find the rules section and add:

```javascript
"no-restricted-imports": [
  "error",
  {
    patterns: [
      {
        group: ["@/components/ui-v8/*", "@/components/ui-v8", "**/ui-v8/*", "**/ui-v8"],
        message: "ui-v8 has been consolidated into ui/. Import from @/components/ui instead."
      }
    ]
  }
]
```

If there's already a no-restricted-imports rule, merge the patterns.
  </action>
  <verify>
- ESLint config has no-restricted-imports rule for ui-v8
- Running `pnpm lint` doesn't fail on existing code
  </verify>
  <done>ESLint guard added to prevent ui-v8 imports</done>
</task>

<task type="auto">
  <name>Task 3: Run dead code detection and final verification</name>
  <files>Various</files>
  <action>
1. Run knip to detect dead code:
   ```bash
   pnpm knip
   ```

2. Review knip output for:
   - Unused exports from the migration
   - Orphaned types
   - Components that lost their consumers

3. Clean up any identified dead code if it's clearly safe to remove.

4. Run full verification suite:
   ```bash
   pnpm lint
   pnpm typecheck
   pnpm test
   pnpm build
   ```

5. Verify success criteria from phase requirements:
   - [ ] All components import from `@/components/ui/` (no ui-v8 paths)
   - [ ] V7 naming removed from public APIs (palettes, not v7Palettes)
   - [ ] Single Modal, BottomSheet, Drawer implementation (no duplicates)
   - [ ] Single Tooltip and Toast implementation
   - [ ] No broken imports after consolidation
  </action>
  <verify>
- pnpm lint passes
- pnpm typecheck passes
- pnpm test passes
- pnpm build passes
- No ui-v8 references in codebase (except ESLint rule and planning docs)
  </verify>
  <done>Dead code cleaned, all verifications pass, phase complete</done>
</task>

</tasks>

<verification>
```bash
# Full verification suite
pnpm lint && pnpm typecheck && pnpm test && pnpm build

# Confirm no ui-v8 in source (excluding config/planning)
grep -r "ui-v8" src/ --include="*.tsx" --include="*.ts" | grep -v ".planning" && echo "ERROR" || echo "OK: no ui-v8"

# Confirm no v7Palettes
grep -r "v7Palettes" src/ && echo "ERROR" || echo "OK: no v7Palettes"

# Confirm ui-v8 directory gone
test -d src/components/ui-v8 && echo "ERROR: ui-v8 still exists" || echo "OK: ui-v8 removed"
```
</verification>

<success_criteria>
Phase 26 success criteria (all must be TRUE):
1. All components import from `@/components/ui/` (no ui-v8 paths)
2. V7 naming removed from public APIs (palettes, not v7Palettes)
3. Single Modal, BottomSheet, Drawer implementation (no duplicates)
4. Single Tooltip and Toast implementation
5. No broken imports after consolidation
6. All tests pass
7. Build succeeds
8. ESLint guards ui-v8 recreation
</success_criteria>

<output>
After completion, create `.planning/phases/26-component-consolidation/26-08-SUMMARY.md`
</output>
