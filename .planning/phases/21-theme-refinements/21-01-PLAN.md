---
phase: 21-theme-refinements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/tokens.css
  - src/components/layout/footer.tsx
autonomous: true

must_haves:
  truths:
    - "Footer text is readable in light mode (not white on light)"
    - "Dark mode surfaces are OLED-friendly (pure/near black)"
    - "All text/background combinations meet WCAG AA contrast (4.5:1)"
  artifacts:
    - path: "src/styles/tokens.css"
      provides: "Refined color tokens for light/dark modes"
      contains: "--color-surface-primary: #000000"
    - path: "src/components/layout/footer.tsx"
      provides: "Theme-aware footer styling"
      min_lines: 500
  key_links:
    - from: "src/components/layout/footer.tsx"
      to: "src/styles/tokens.css"
      via: "CSS variable references"
      pattern: "var\\(--color-"
---

<objective>
Refine color tokens for OLED-friendly dark mode and fix footer text visibility in light mode.

Purpose: THEME-01, THEME-02, THEME-06 - Users can read footer in light mode, dark mode feels premium with pure blacks.
Output: Updated tokens.css with OLED colors, theme-aware footer.tsx using CSS variables instead of hardcoded colors.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-theme-refinements/21-CONTEXT.md
@.planning/phases/21-theme-refinements/21-RESEARCH.md
@src/styles/tokens.css
@src/components/layout/footer.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update tokens.css with OLED-friendly dark mode</name>
  <files>src/styles/tokens.css</files>
  <action>
Update dark mode section in tokens.css:

**Surface colors - OLED pure blacks:**
- `--color-surface-primary: #000000` (pure black for OLED)
- `--color-surface-secondary: #0a0a0a` (near black)
- `--color-surface-tertiary: #141414` (subtle elevation)
- `--color-surface-elevated: #1a1a1a` (card surfaces)

**Accent colors - More vibrant for dark:**
- `--color-primary: #FF4D6D` (brighter red)
- `--color-secondary: #FFE066` (brighter gold)

**Add new footer-specific tokens (both light and dark):**

Light mode (:root):
```css
--color-footer-bg: var(--color-surface-tertiary);
--color-footer-text: var(--color-text-secondary);
--color-footer-text-muted: var(--color-text-muted);
--color-footer-border: var(--color-border-default);
```

Dark mode (.dark):
```css
--color-footer-bg: #0a0a0a;
--color-footer-text: #e0e0e0;
--color-footer-text-muted: #a0a0a0;
--color-footer-border: rgba(255, 255, 255, 0.1);
```

**Add colored shadows for dark mode floating effect:**
```css
--shadow-glow-surface: 0 0 40px rgba(232, 67, 99, 0.15);
```

Keep existing warm undertone colors (#1A1918) as fallback for components not yet migrated.
  </action>
  <verify>
Run `pnpm build` to ensure CSS compiles without errors.
Visually inspect tokens.css for proper light/dark variable structure.
  </verify>
  <done>
tokens.css has OLED-friendly dark surface colors (#000000 primary) and footer-specific tokens for both themes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Make footer theme-aware using CSS variables</name>
  <files>src/components/layout/footer.tsx</files>
  <action>
Replace hardcoded dark colors in footer.tsx with theme-aware CSS variables.

**GradientBackground component (lines 212-251):**
Replace the hardcoded gradient:
```tsx
// BEFORE
<div className="absolute inset-0 bg-gradient-to-br from-[#1a1a2e] via-[#16213e] to-[#0f0f23]" />
```

```tsx
// AFTER - use Tailwind classes that respect theme
<div className="absolute inset-0 bg-gradient-to-br from-surface-tertiary via-surface-secondary to-surface-primary dark:from-[#0a0a0a] dark:via-[#050505] dark:to-black" />
```

**Text color classes throughout:**
Replace `text-white` and `text-white/60` etc. with theme-aware alternatives:
- `text-white` -> `text-footer-text` (or `text-text-primary dark:text-white`)
- `text-white/60` -> `text-text-muted dark:text-white/60`
- `text-white/40` -> `text-text-muted/60 dark:text-white/40`

**Border colors:**
- `border-white/10` -> `border-border-default dark:border-white/10`

**Input/button backgrounds in NewsletterSignup:**
- `bg-white/10` -> `bg-surface-tertiary dark:bg-white/10`
- `border-white/20` -> `border-border-default dark:border-white/20`

**WobblingIcon backgrounds:**
- `bg-white/10 hover:bg-white/20` -> `bg-surface-tertiary hover:bg-surface-secondary dark:bg-white/10 dark:hover:bg-white/20`

**Key principle:** In light mode, footer should have light background with dark text. In dark mode, footer has dark (OLED black) background with light text.

Add Tailwind config mapping if needed for `text-footer-text` etc., OR use direct `text-[var(--color-footer-text)]` syntax.
  </action>
  <verify>
1. `pnpm dev` and view footer in light mode - text should be visible (dark on light)
2. Toggle to dark mode - footer should have OLED-black background with white text
3. `pnpm build` passes
  </verify>
  <done>
Footer uses theme-aware CSS variables. Text readable in light mode (not white on light background). Dark mode uses OLED-black gradients.
  </done>
</task>

<task type="auto">
  <name>Task 3: Contrast audit and token review</name>
  <files>src/styles/tokens.css</files>
  <action>
Review all text/background combinations in tokens.css for WCAG AA compliance (4.5:1 ratio for normal text, 3:1 for large text).

**Check these pairs:**
Light mode:
- `--color-text-primary` (#111111) on `--color-surface-primary` (#FFFFFF) - verify 4.5:1+
- `--color-text-secondary` (#3B3B3B) on `--color-surface-secondary` (#FAFAFA) - verify 4.5:1+
- `--color-text-muted` (#6B6B6B) on `--color-surface-tertiary` (#F5F5F5) - verify 4.5:1+

Dark mode:
- `--color-text-primary` (#F8F7F6) on `--color-surface-primary` (#000000) - verify 4.5:1+
- `--color-text-secondary` (#C5C3C0) on `--color-surface-secondary` (#0a0a0a) - verify 4.5:1+
- `--color-text-muted` (#8A8784) on `--color-surface-tertiary` (#141414) - verify 4.5:1+

**Adjust if needed:**
- If muted text is too low contrast, increase lightness in dark mode
- Ensure primary/secondary accent colors have sufficient contrast for interactive elements

**Add CSS comment block documenting contrast ratios:**
```css
/* CONTRAST VERIFICATION (WCAG AA = 4.5:1 min)
 * Light mode:
 *   text-primary (#111) on surface-primary (#FFF): ~21:1 ✓
 *   text-secondary (#3B3B3B) on surface-secondary (#FAFAFA): ~8.5:1 ✓
 *   text-muted (#6B6B6B) on surface-tertiary (#F5F5F5): ~4.6:1 ✓
 * Dark mode:
 *   text-primary (#F8F7F6) on surface-primary (#000): ~20:1 ✓
 *   text-secondary (#C5C3C0) on surface-secondary (#0a0a0a): ~12:1 ✓
 *   text-muted (#8A8784) on surface-tertiary (#141414): ~5.5:1 ✓
 */
```
  </action>
  <verify>
1. Use browser DevTools or online contrast checker (WebAIM) to verify ratios
2. `pnpm build` passes
3. Visual inspection in light and dark modes confirms readable text
  </verify>
  <done>
All text/background combinations verified for WCAG AA contrast. Tokens documented with contrast ratios.
  </done>
</task>

</tasks>

<verification>
1. `pnpm build` completes without errors
2. Visual verification: Footer text readable in both light and dark modes
3. Dark mode has pure black (#000000) as primary surface color
4. No hardcoded dark colors remain in footer.tsx (search for `#1a1a2e`, `#16213e`, `#0f0f23`)
</verification>

<success_criteria>
- THEME-01 satisfied: Footer text visible in light mode
- THEME-02 satisfied: Dark mode uses OLED-friendly pure blacks
- THEME-06 satisfied: Contrast audit complete, all pairs meet WCAG AA
- No regressions: Other components still look correct
</success_criteria>

<output>
After completion, create `.planning/phases/21-theme-refinements/21-01-SUMMARY.md`
</output>
