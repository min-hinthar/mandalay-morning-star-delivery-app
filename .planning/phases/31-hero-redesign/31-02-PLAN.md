---
phase: 31-hero-redesign
plan: 02
type: execute
wave: 2
depends_on: ["31-01"]
files_modified:
  - src/components/ui/homepage/Hero.tsx
autonomous: true

must_haves:
  truths:
    - "Hero displays at full viewport height (100vh/100svh)"
    - "BrandMascot component removed from Hero"
    - "Hero content vertically centered (not bottom-aligned)"
    - "Gradient background uses new --hero-bg-* tokens"
    - "Content has 4-layer parallax structure ready"
  artifacts:
    - path: "src/components/ui/homepage/Hero.tsx"
      provides: "Restructured hero with layer architecture"
      min_lines: 200
  key_links:
    - from: "src/components/ui/homepage/Hero.tsx"
      to: "src/styles/tokens.css"
      via: "CSS variables"
      pattern: "var\\(--hero-bg-"
---

<objective>
Restructure Hero.tsx layout: remove mascot, add multi-layer parallax architecture, update gradient to use new tokens.

Purpose: Establish the 4+ layer structure required for parallax depth. CONTEXT.md specifies no mascot (floating emojis replace it), headline centered, and full viewport height.

Output: Refactored Hero.tsx with layer containers ready for orbs and emojis.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/31-hero-redesign/31-CONTEXT.md
@.planning/phases/31-hero-redesign/31-RESEARCH.md
@.planning/phases/31-hero-redesign/31-01-SUMMARY.md
@src/components/ui/homepage/Hero.tsx
@src/lib/motion-tokens.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove BrandMascot and restructure layout</name>
  <files>src/components/ui/homepage/Hero.tsx</files>
  <action>
1. Remove the BrandMascot import:
   - Delete: `import { BrandMascot } from "@/components/ui/brand/BrandMascot";`

2. Remove showMascot prop from HeroProps interface:
   - Delete: `showMascot?: boolean;`
   - Delete from HeroContentProps interface too

3. In HeroContent component:
   - Remove the entire mascot rendering block (motion.div with BrandMascot)
   - Change layout from `justify-end` to `justify-center` for vertical centering
   - Update the outer div: `flex flex-col items-center justify-center`

4. In main Hero component:
   - Remove `showMascot = true` from destructured props
   - Remove `showMascot` prop pass to HeroContent

5. Update GradientFallback to use new tokens:
   - Change gradient background from `--hero-gradient-*` to `--hero-bg-*`:
   ```tsx
   style={{
     background: `linear-gradient(180deg, var(--hero-bg-start) 0%, var(--hero-bg-mid) 50%, var(--hero-bg-end) 100%)`,
   }}
   ```
   - Keep the useCustomGradient fallback for DynamicThemeProvider

The layout should now be:
- Full viewport height (100svh)
- Content vertically centered
- No mascot
- Uses new warm gradient tokens
  </action>
  <verify>grep -c "BrandMascot" src/components/ui/homepage/Hero.tsx returns 0 (no mascot references)</verify>
  <done>BrandMascot removed, layout centered, gradient uses new tokens</done>
</task>

<task type="auto">
  <name>Task 2: Add parallax layer containers</name>
  <files>src/components/ui/homepage/Hero.tsx</files>
  <action>
Add layer containers within the Hero section for parallax depth. Per RESEARCH.md layer structure:

| Layer | Content | Z-Index |
|-------|---------|---------|
| 1 | Gradient background | 0 (static) |
| 2 | Background orbs (far) | 1 |
| 3 | Mid-distance orbs | 2 |
| 4 | Floating emojis | 3 |
| 5 | Text + CTA | 4 |

Inside the Hero section (after GradientFallback opens but before content):

```tsx
{/* Layer 1: Gradient background - handled by GradientFallback */}

{/* Layer 2: Background orbs (far) - populated in 31-03 */}
<div
  className="absolute inset-0 pointer-events-none"
  style={{ zIndex: 1 }}
  aria-hidden="true"
  id="hero-layer-orbs-far"
/>

{/* Layer 3: Mid-distance orbs - populated in 31-03 */}
<div
  className="absolute inset-0 pointer-events-none"
  style={{ zIndex: 2 }}
  aria-hidden="true"
  id="hero-layer-orbs-mid"
/>

{/* Layer 4: Floating emojis - populated in 31-03 */}
<div
  className="absolute inset-0 pointer-events-none overflow-hidden"
  style={{ zIndex: 3 }}
  aria-hidden="true"
  id="hero-layer-emojis"
/>
```

The GradientFallback content (text layer) should have style={{ zIndex: 4 }} to stay on top.

Add isolate class to Hero section for local stacking context (prevents z-index leakage).
  </action>
  <verify>grep -c "hero-layer-" src/components/ui/homepage/Hero.tsx returns 3 (three layer containers)</verify>
  <done>Parallax layer containers added with proper z-index stacking</done>
</task>

<task type="auto">
  <name>Task 3: Update scroll parallax transforms</name>
  <files>src/components/ui/homepage/Hero.tsx</files>
  <action>
Update the scroll-based parallax to use parallaxPresets from motion-tokens.ts.

1. Import parallaxPresets:
   ```tsx
   import {
     spring,
     staggerContainer,
     parallaxPresets,  // Add this
   } from "@/lib/motion-tokens";
   ```

2. Add parallax transforms for each layer using useTransform:
   ```tsx
   // Existing scroll tracking
   const { scrollYProgress } = useScroll({
     target: containerRef,
     offset: ["start start", "end start"],
   });

   // Layer transforms using parallaxPresets
   const orbsFarY = useTransform(
     scrollYProgress,
     [0, 1],
     ["0%", `${parallaxPresets.far.speedFactor * 100}%`]
   );
   const orbsMidY = useTransform(
     scrollYProgress,
     [0, 1],
     ["0%", `${parallaxPresets.mid.speedFactor * 100}%`]
   );
   const emojisY = useTransform(
     scrollYProgress,
     [0, 1],
     ["0%", `${parallaxPresets.near.speedFactor * 100}%`]
   );
   // contentY already exists (use parallaxPresets.content for consistency)
   const contentY = useTransform(
     scrollYProgress,
     [0, 1],
     ["0%", `${parallaxPresets.content.speedFactor * 15}%`]  // 15% max travel
   );
   ```

3. Export these transforms via data attributes or context for use in 31-03:
   - For now, just set up the transforms. They'll be connected to layer components in 31-03.

4. Add smooth springs to all parallax values:
   ```tsx
   const smoothOrbsFarY = useSpring(orbsFarY, { stiffness: 100, damping: 30 });
   const smoothOrbsMidY = useSpring(orbsMidY, { stiffness: 100, damping: 30 });
   const smoothEmojisY = useSpring(emojisY, { stiffness: 100, damping: 30 });
   ```
  </action>
  <verify>grep -c "parallaxPresets" src/components/ui/homepage/Hero.tsx returns at least 3 uses</verify>
  <done>Scroll parallax transforms configured using motion-tokens presets</done>
</task>

</tasks>

<verification>
1. Run: `pnpm typecheck` - no type errors
2. Run: `pnpm build` - build succeeds
3. Visual: Open homepage - hero shows centered content with warm gradient (saffron-cream in light, black-saffron in dark)
4. Visual: Scroll - content parallax still works smoothly
5. Check: No BrandMascot visible (removed)
</verification>

<success_criteria>
- BrandMascot completely removed (import, props, rendering)
- Hero content vertically centered in viewport
- Gradient uses --hero-bg-* tokens (warm saffron palette)
- Layer containers exist for orbs (far, mid) and emojis
- Parallax transforms use parallaxPresets from motion-tokens
- No visual regressions, build passes
</success_criteria>

<output>
After completion, create `.planning/phases/31-hero-redesign/31-02-SUMMARY.md`
</output>
