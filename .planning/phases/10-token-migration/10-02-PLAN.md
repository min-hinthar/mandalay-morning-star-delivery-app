---
phase: 10-token-migration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/menu/menu-skeleton.tsx
  - src/components/menu/menu-item-card.tsx
  - src/components/menu/MenuItemCard.tsx
  - src/components/menu/item-detail-modal.tsx
  - src/components/menu/MenuLayout.tsx
  - src/components/menu/ItemDetail.tsx
  - src/components/menu/category-tabs.tsx
  - src/components/menu/CategoryCarousel.tsx
  - src/components/ui-v8/menu/MenuItemCardV8.tsx
  - src/components/ui-v8/menu/BlurImage.tsx
autonomous: true

must_haves:
  truths:
    - "No hardcoded z-10, z-20, z-30 Tailwind classes remain in menu components"
    - "All menu components use semantic z-dropdown, z-sticky, or z-fixed tokens"
    - "V8 menu components follow same token patterns as legacy menu"
  artifacts:
    - path: "src/components/menu/MenuItemCard.tsx"
      provides: "Menu card with z-dropdown and z-sticky tokens"
      contains: "z-dropdown"
    - path: "src/components/menu/CategoryCarousel.tsx"
      provides: "Carousel with z-dropdown and z-fixed tokens"
      contains: "z-fixed"
    - path: "src/components/ui-v8/menu/MenuItemCardV8.tsx"
      provides: "V8 card with z-dropdown token"
      contains: "z-dropdown"
  key_links:
    - from: "src/components/menu/*.tsx"
      to: "tailwind.config.ts"
      via: "z-index utility classes"
      pattern: "z-(dropdown|sticky|fixed)"
---

<objective>
Migrate all menu component z-index values to design tokens.

Purpose: Replace hardcoded z-10, z-20, z-30 Tailwind classes with semantic tokens (z-dropdown, z-sticky, z-fixed). Maintain visual layering hierarchy.
Output: 10 menu-related files using consistent z-index token patterns.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-token-migration/10-RESEARCH.md
@src/design-system/tokens/z-index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate 6 legacy menu files to z-index tokens</name>
  <files>
    src/components/menu/menu-skeleton.tsx
    src/components/menu/menu-item-card.tsx
    src/components/menu/MenuItemCard.tsx
    src/components/menu/item-detail-modal.tsx
    src/components/menu/MenuLayout.tsx
    src/components/menu/ItemDetail.tsx
  </files>
  <action>
    Replace all hardcoded z-index Tailwind classes with semantic tokens:

    | Old Class | New Class | Semantic Meaning |
    |-----------|-----------|------------------|
    | `z-10` | `z-dropdown` | Overlay content, badges, floating elements |
    | `z-20` | `z-sticky` | Sticky headers, persistent UI |
    | `z-30` | `z-fixed` | Fixed position elements |

    Migration per file:
    - menu-skeleton.tsx: z-10 -> z-dropdown (1 location)
    - menu-item-card.tsx: z-10 -> z-dropdown (3 locations)
    - MenuItemCard.tsx: z-10 -> z-dropdown, z-20 -> z-sticky (4 locations)
    - item-detail-modal.tsx: z-10 -> z-dropdown, z-20 -> z-sticky (2 locations)
    - MenuLayout.tsx: z-20 -> z-sticky (1 location)
    - ItemDetail.tsx: z-20 -> z-sticky (1 location)

    Do NOT add imports - these use Tailwind classes.
  </action>
  <verify>
    Run: `grep -En "z-10|z-20|z-30" src/components/menu/{menu-skeleton,menu-item-card,MenuItemCard,item-detail-modal,MenuLayout,ItemDetail}.tsx`
    Expected: No matches

    Run: `grep -En "z-(dropdown|sticky)" src/components/menu/{MenuItemCard,item-detail-modal,MenuLayout,ItemDetail}.tsx`
    Expected: Multiple matches showing successful migration
  </verify>
  <done>
    6 legacy menu files migrated to semantic z-index tokens. z-10 replaced with z-dropdown, z-20 replaced with z-sticky.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate category navigation and V8 menu components</name>
  <files>
    src/components/menu/category-tabs.tsx
    src/components/menu/CategoryCarousel.tsx
    src/components/ui-v8/menu/MenuItemCardV8.tsx
    src/components/ui-v8/menu/BlurImage.tsx
  </files>
  <action>
    Replace all hardcoded z-index Tailwind classes:

    | Old Class | New Class | File |
    |-----------|-----------|------|
    | `z-10` | `z-dropdown` | category-tabs.tsx (3 locations) |
    | `z-10` | `z-dropdown` | CategoryCarousel.tsx |
    | `z-30` | `z-fixed` | CategoryCarousel.tsx |
    | `z-10` | `z-dropdown` | MenuItemCardV8.tsx (1 location) |
    | `z-10` | `z-dropdown` | BlurImage.tsx (2 locations) |

    CategoryCarousel.tsx has both z-10 and z-30:
    - z-10 for floating elements -> z-dropdown
    - z-30 for fixed navigation -> z-fixed

    Do NOT add imports - these use Tailwind classes.
  </action>
  <verify>
    Run: `grep -En "z-10|z-20|z-30" src/components/menu/{category-tabs,CategoryCarousel}.tsx src/components/ui-v8/menu/{MenuItemCardV8,BlurImage}.tsx`
    Expected: No matches

    Run: `grep -En "z-(dropdown|fixed)" src/components/menu/CategoryCarousel.tsx`
    Expected: Matches for both z-dropdown and z-fixed
  </verify>
  <done>
    4 category/V8 menu files migrated. CategoryCarousel.tsx uses both z-dropdown and z-fixed for proper layering.
  </done>
</task>

</tasks>

<verification>
Run ESLint on all menu files:
```bash
npx eslint --no-warn-ignored src/components/menu/*.tsx src/components/ui-v8/menu/*.tsx 2>&1 | grep -c "z-index"
```
Expected: 0 z-index warnings

Count total z-index token usage:
```bash
grep -r "z-dropdown\|z-sticky\|z-fixed" src/components/menu/ src/components/ui-v8/menu/ | wc -l
```
Expected: ~15+ matches (confirms migration complete)
</verification>

<success_criteria>
- 10 menu files migrated from hardcoded z-index to semantic tokens
- z-10 -> z-dropdown, z-20 -> z-sticky, z-30 -> z-fixed
- ESLint z-index rule produces 0 warnings for menu files
- Menu page renders with correct visual layering (badges above content, sticky headers above content)
</success_criteria>

<output>
After completion, create `.planning/phases/10-token-migration/10-02-SUMMARY.md`
</output>
