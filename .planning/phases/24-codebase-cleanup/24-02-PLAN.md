---
phase: 24-codebase-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/layout/header.tsx
  - src/components/layout/HeaderClient.tsx
  - src/components/layout/HeaderServer.tsx
  - src/components/layout/MobileNav.tsx
  - src/components/layout/NavLinks.tsx
  - src/components/layout/footer.tsx
  - src/components/homepage/CoverageSection.tsx
  - src/components/homepage/FloatingFood.tsx
  - src/components/homepage/HeroVideo.tsx
  - src/components/homepage/Timeline.tsx
  - src/components/checkout/CoverageStatus.tsx
  - src/components/menu/CategoryCarousel.tsx
  - src/components/menu/ModifierToggle.tsx
  - src/components/menu/VisualPreview.tsx
  - src/components/layouts/ParallaxContainer.tsx
  - src/components/map/CoverageMap.tsx
  - src/components/map/PlacesAutocomplete.tsx
  - src/components/tracking/PushToast.tsx
  - src/components/tracking/TrackingMap.tsx
  - src/lib/webgl/grain.ts
  - src/lib/webgl/particles.ts
autonomous: true

must_haves:
  truths:
    - "No legacy header files exist"
    - "No unused homepage components exist"
    - "No unused menu components exist"
    - "Build passes after removal"
  artifacts:
    - path: "src/components/layout/AppHeader/"
      provides: "Current header implementation"
  key_links:
    - from: "src/app/(customer)/layout.tsx"
      to: "AppHeader"
      via: "Direct import"
      pattern: "AppHeader"
---

<objective>
Remove legacy files flagged as unused by knip.

Purpose: Clean up old implementations superseded by v1.2 work (AppHeader replaced old header, unused homepage/menu components accumulating).

Output: Leaner codebase with only active code, reduced build times.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-codebase-cleanup/24-CONTEXT.md
@.planning/phases/24-codebase-cleanup/24-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove legacy layout files</name>
  <files>
    src/components/layout/header.tsx
    src/components/layout/HeaderClient.tsx
    src/components/layout/HeaderServer.tsx
    src/components/layout/MobileNav.tsx
    src/components/layout/NavLinks.tsx
    src/components/layout/footer.tsx
  </files>
  <action>
Delete legacy layout components superseded by Phase 23 Header & Nav Rebuild:

1. Delete old header files (AppHeader is current):
   - `src/components/layout/header.tsx`
   - `src/components/layout/HeaderClient.tsx`
   - `src/components/layout/HeaderServer.tsx`

2. Delete old mobile nav (MobileDrawer is current):
   - `src/components/layout/MobileNav.tsx`
   - `src/components/layout/NavLinks.tsx`

3. Delete unused footer (if truly unused):
   - `src/components/layout/footer.tsx`
   - VERIFY first: grep for "footer" imports - may be used differently

4. Run `pnpm typecheck` to verify no broken imports

Note: The current layout uses:
- `src/components/layout/AppHeader/` (current header)
- `src/components/layout/MobileDrawer/` (current mobile nav)
- `src/components/layout/CommandPalette/` (search)
  </action>
  <verify>
    - `ls src/components/layout/header.tsx` returns "No such file"
    - `ls src/components/layout/MobileNav.tsx` returns "No such file"
    - `pnpm typecheck` passes
  </verify>
  <done>All legacy layout files removed, no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 2: Remove unused component files</name>
  <files>
    src/components/homepage/CoverageSection.tsx
    src/components/homepage/FloatingFood.tsx
    src/components/homepage/HeroVideo.tsx
    src/components/homepage/Timeline.tsx
    src/components/checkout/CoverageStatus.tsx
    src/components/menu/CategoryCarousel.tsx
    src/components/menu/ModifierToggle.tsx
    src/components/menu/VisualPreview.tsx
    src/components/layouts/ParallaxContainer.tsx
    src/components/map/CoverageMap.tsx
    src/components/map/PlacesAutocomplete.tsx
    src/components/tracking/PushToast.tsx
    src/components/tracking/TrackingMap.tsx
    src/lib/webgl/grain.ts
    src/lib/webgl/particles.ts
  </files>
  <action>
Delete unused components flagged by knip:

1. Homepage components (not used in current homepage):
   - `src/components/homepage/CoverageSection.tsx`
   - `src/components/homepage/FloatingFood.tsx`
   - `src/components/homepage/HeroVideo.tsx`
   - `src/components/homepage/Timeline.tsx`

2. Checkout component:
   - `src/components/checkout/CoverageStatus.tsx`

3. Menu components (UnifiedMenuItemCard is standard):
   - `src/components/menu/CategoryCarousel.tsx`
   - `src/components/menu/ModifierToggle.tsx`
   - `src/components/menu/VisualPreview.tsx`

4. Layout component:
   - `src/components/layouts/ParallaxContainer.tsx`

5. Map components:
   - `src/components/map/CoverageMap.tsx`
   - `src/components/map/PlacesAutocomplete.tsx`

6. Tracking components:
   - `src/components/tracking/PushToast.tsx`
   - `src/components/tracking/TrackingMap.tsx`

7. WebGL utilities (unused without 3D):
   - `src/lib/webgl/grain.ts`
   - `src/lib/webgl/particles.ts`
   - Delete `src/lib/webgl/` directory if empty after

8. Run `pnpm typecheck` to catch any missed imports
9. Run `pnpm build` to verify build passes

IMPORTANT: Before deleting each file, grep for imports to confirm truly unused.
If any file IS imported, skip it and note in summary.
  </action>
  <verify>
    - `pnpm typecheck` passes
    - `pnpm build` passes
    - `pnpm knip 2>&1 | grep "Unused files"` shows reduced count
  </verify>
  <done>All truly unused files removed, build passes, knip shows fewer unused files</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` - No TypeScript errors
2. `pnpm build` - Build succeeds
3. `pnpm knip 2>&1 | head -30` - Fewer unused files reported
4. Homepage, menu, checkout pages load correctly (visual spot check)
</verification>

<success_criteria>
- Legacy layout files (header.tsx, MobileNav.tsx, etc.) deleted
- 15+ unused component files deleted
- WebGL utilities deleted
- Build passes
- No runtime errors on main pages
</success_criteria>

<output>
After completion, create `.planning/phases/24-codebase-cleanup/24-02-SUMMARY.md`
</output>
