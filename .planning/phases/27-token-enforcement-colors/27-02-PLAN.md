---
phase: 27-token-enforcement-colors
plan: 02
type: execute
wave: 2
depends_on: ["27-01"]
files_modified:
  - src/components/ui/Modal.tsx
  - src/components/ui/Toast.tsx
  - src/components/ui/Tooltip.tsx
  - src/components/ui/Confetti.tsx
  - src/components/ui/checkbox.tsx
  - src/components/ui/success-checkmark.tsx
  - src/components/ui/skeleton.tsx
  - src/components/ui/Backdrop.tsx
  - src/components/ui/Drawer.tsx
  - src/components/ui/dropdown-menu.tsx
  - src/components/ui/alert-dialog.tsx
  - src/components/ui/dialog.tsx
  - src/components/ui/theme-toggle.tsx
  - src/components/ui/animated-toggle.tsx
  - src/components/ui/Dropdown.tsx
  - src/components/ui/cart/CartBar.tsx
  - src/components/ui/cart/CartDrawer.tsx
  - src/components/ui/cart/CartButton.tsx
  - src/components/ui/cart/CartItem.tsx
  - src/components/ui/cart/AddToCartButton.tsx
  - src/components/ui/cart/ClearCartConfirmation.tsx
  - src/components/ui/cart/CartSummary.tsx
  - src/components/ui/menu/MenuContent.tsx
  - src/components/ui/menu/ItemDetailSheet.tsx
  - src/components/ui/menu/FavoriteButton.tsx
  - src/components/ui/navigation/AppShell.tsx
autonomous: true

must_haves:
  truths:
    - "Zero text-white/text-black violations in ui/ components"
    - "Zero bg-white/bg-black violations in ui/ components"
    - "Modal backdrop uses bg-overlay token"
    - "Skeleton uses bg-skeleton token"
    - "Both light and dark themes render correctly for all UI components"
  artifacts:
    - path: "src/components/ui/Modal.tsx"
      provides: "Theme-aware modal with overlay token"
      contains: "bg-overlay"
    - path: "src/components/ui/skeleton.tsx"
      provides: "Theme-aware skeleton with skeleton token"
      contains: "bg-skeleton"
  key_links:
    - from: "src/components/ui/*.tsx"
      to: "tailwind.config.ts"
      via: "Tailwind utility classes"
      pattern: "bg-overlay|bg-skeleton|text-text-"
---

<objective>
Migrate all UI component library files to semantic color tokens.

Purpose: Core component library becomes fully theme-aware
Output: All ui/ components use semantic tokens, zero hardcoded colors
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-token-enforcement-colors/27-CONTEXT.md
@.planning/phases/27-token-enforcement-colors/27-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate core UI components</name>
  <files>
    src/components/ui/Modal.tsx
    src/components/ui/Toast.tsx
    src/components/ui/Tooltip.tsx
    src/components/ui/Confetti.tsx
    src/components/ui/checkbox.tsx
    src/components/ui/success-checkmark.tsx
    src/components/ui/skeleton.tsx
    src/components/ui/Backdrop.tsx
    src/components/ui/Drawer.tsx
    src/components/ui/dropdown-menu.tsx
    src/components/ui/alert-dialog.tsx
    src/components/ui/dialog.tsx
    src/components/ui/theme-toggle.tsx
    src/components/ui/animated-toggle.tsx
    src/components/ui/Dropdown.tsx
  </files>
  <action>
Replace hardcoded colors with semantic tokens:

Token mapping:
- Modal/Drawer backdrop: `bg-black/50` -> `bg-overlay`, `bg-black/80` -> `bg-overlay-heavy`
- Toast backgrounds: `bg-white` -> `bg-surface-elevated`, `text-black` -> `text-text-primary`
- Tooltip: `bg-black text-white` -> `bg-surface-inverse text-text-inverse`
- Skeleton: `bg-gray-*` -> `bg-skeleton`
- Checkbox checkmark: `text-white` on checked -> `text-primary-foreground`
- Success checkmark: Use status tokens

Specific patterns:
1. Modal.tsx: Backdrop overlay color
2. Toast.tsx: Background and text colors for different toast types
3. Tooltip.tsx: Dark tooltip style
4. Confetti.tsx: Keep confetti colors as-is (decorative, can use brand colors)
5. skeleton.tsx: Background pulse animation color
6. Backdrop.tsx: Overlay background
7. Drawer.tsx: Backdrop and content background
8. dropdown-menu.tsx, alert-dialog.tsx, dialog.tsx: Surface colors
9. theme-toggle.tsx, animated-toggle.tsx: Toggle states
  </action>
  <verify>Run `grep -E "text-white|text-black|bg-white|bg-black" src/components/ui/*.tsx` returns minimal/no matches (excluding Confetti decorative colors)</verify>
  <done>Core UI components use semantic tokens</done>
</task>

<task type="auto">
  <name>Task 2: Migrate cart components</name>
  <files>
    src/components/ui/cart/CartBar.tsx
    src/components/ui/cart/CartDrawer.tsx
    src/components/ui/cart/CartButton.tsx
    src/components/ui/cart/CartItem.tsx
    src/components/ui/cart/AddToCartButton.tsx
    src/components/ui/cart/ClearCartConfirmation.tsx
    src/components/ui/cart/CartSummary.tsx
  </files>
  <action>
Replace hardcoded colors with semantic tokens:

Token mapping:
- CartBar: `text-white` on primary button -> `text-primary-foreground`
- CartBar background: `bg-white` -> `bg-surface-elevated`
- CartButton: Badge text on primary bg -> `text-primary-foreground`
- CartItem: Text and background colors
- AddToCartButton: Button states
- ClearCartConfirmation: Modal/dialog colors
- CartSummary: Summary card styling

Focus areas:
1. CartBar.tsx has 3+ violations - likely button text and badge
2. CartButton.tsx has 2 violations - badge styling
3. Ensure hover states use appropriate tokens
  </action>
  <verify>Run `grep -E "text-white|text-black|bg-white|bg-black" src/components/ui/cart/*.tsx` returns no matches</verify>
  <done>Cart components use semantic tokens</done>
</task>

<task type="auto">
  <name>Task 3: Migrate menu and navigation components</name>
  <files>
    src/components/ui/menu/MenuContent.tsx
    src/components/ui/menu/ItemDetailSheet.tsx
    src/components/ui/menu/FavoriteButton.tsx
    src/components/ui/navigation/AppShell.tsx
  </files>
  <action>
Replace hardcoded colors with semantic tokens:

Token mapping:
- MenuContent: Surface and text colors
- ItemDetailSheet: Sheet background (`bg-white` -> `bg-surface-primary`)
- FavoriteButton: Heart icon states
- AppShell: Navigation background colors

Patterns:
1. MenuContent.tsx: Content area styling
2. ItemDetailSheet.tsx: Modal/sheet overlay and content
3. FavoriteButton.tsx: Filled heart color on selected state
4. AppShell.tsx: Shell wrapper background
  </action>
  <verify>Run `grep -E "text-white|text-black|bg-white|bg-black" src/components/ui/menu/*.tsx src/components/ui/navigation/*.tsx` returns no matches</verify>
  <done>Menu and navigation components use semantic tokens</done>
</task>

</tasks>

<verification>
1. Run `pnpm typecheck` - no type errors
2. Run `pnpm lint` - no ESLint color violations in ui/ components
3. Run `pnpm build` - builds successfully
4. Manual: Test Modal, Toast, Tooltip in both themes
5. Manual: Test Cart components in both themes
6. Manual: Test menu and navigation in both themes
</verification>

<success_criteria>
- Zero `text-white`, `text-black`, `bg-white`, `bg-black` in ui/ directory (except intentional decorative)
- Modal/Drawer use `bg-overlay` for backdrop
- Skeleton uses `bg-skeleton` token
- All components render correctly in both light and dark themes
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/27-token-enforcement-colors/27-02-SUMMARY.md`
</output>
