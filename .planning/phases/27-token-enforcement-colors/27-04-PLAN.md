---
phase: 27-token-enforcement-colors
plan: 04
type: execute
wave: 3
depends_on: ["27-02", "27-03"]
files_modified:
  - src/app/globals.css
  - src/components/homepage/Hero.tsx
  - src/components/homepage/CTABanner.tsx
  - src/components/homepage/FooterCTA.tsx
  - src/components/homepage/HowItWorksSection.tsx
  - src/components/homepage/TestimonialsCarousel.tsx
  - src/components/ui/cart/CartBar.tsx
  - src/components/ui/cart/CartItem.tsx
  - src/components/ui/cart/FlyToCart.tsx
  - src/components/ui/cart/CartSummary.tsx
  - src/components/ui/menu/CategoryTabs.tsx
  - src/components/ui/menu/BlurImage.tsx
  - src/components/ui/EmptyState.tsx
  - src/components/ui/skeleton.tsx
  - src/components/menu/UnifiedMenuItemCard/CardImage.tsx
  - src/components/menu/category-tabs.tsx
  - src/components/admin/analytics/MetricCard.tsx
  - src/components/admin/ExpandableTableRow.tsx
  - src/components/admin/routes/RouteListTable.tsx
  - src/components/admin/drivers/DriverListTable.tsx
  - src/components/checkout/PaymentSuccess.tsx
  - src/components/tracking/ETADisplay.tsx
  - src/components/tracking/ETACountdown.tsx
  - src/components/mascot/BrandMascot.tsx
  - src/components/auth/AuthModal.tsx
  - src/components/layout/MobileDrawer/DrawerUserSection.tsx
  - src/components/layout/AppHeader/AccountIndicator.tsx
  - src/components/layout/AppHeader/AppHeader.tsx
  - src/app/(customer)/orders/page.tsx
  - src/app/(customer)/orders/[id]/page.tsx
autonomous: true

must_haves:
  truths:
    - "All gradients use CSS variables for colors"
    - "Gradient utility classes defined in globals.css"
    - "Gradients adapt correctly between light and dark themes"
    - "Zero hardcoded Tailwind gradient colors (from-*/to-*) in component files"
    - "Both light and dark themes render gradients correctly"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Theme-aware gradient utility classes"
      contains: "bg-gradient-hero"
    - path: "src/components/homepage/Hero.tsx"
      provides: "Hero using gradient utility class"
      contains: "bg-gradient-hero"
  key_links:
    - from: "src/components/**/*.tsx"
      to: "src/app/globals.css"
      via: "Gradient utility classes"
      pattern: "bg-gradient-"
---

<objective>
Convert all gradient definitions to use theme-aware CSS variables.

Purpose: Gradients automatically adapt to light/dark themes
Output: All gradients use CSS variables, unified gradient utilities in globals.css
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-token-enforcement-colors/27-CONTEXT.md
@.planning/phases/27-token-enforcement-colors/27-02-SUMMARY.md
@.planning/phases/27-token-enforcement-colors/27-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create gradient utility classes in globals.css</name>
  <files>src/app/globals.css</files>
  <action>
Add theme-aware gradient utility classes to globals.css in @layer utilities section:

```css
@layer utilities {
  /* Hero gradient - uses hero tokens from tokens.css */
  .bg-gradient-hero {
    background: linear-gradient(
      180deg,
      var(--hero-gradient-start) 0%,
      var(--hero-gradient-mid) 50%,
      var(--hero-gradient-end) 100%
    );
  }

  /* Surface gradient - subtle depth for cards */
  .bg-gradient-surface {
    background: linear-gradient(
      to bottom,
      var(--color-surface-primary) 0%,
      var(--color-surface-secondary) 100%
    );
  }

  /* Primary gradient - for CTAs and highlights */
  .bg-gradient-primary {
    background: linear-gradient(
      135deg,
      var(--color-primary) 0%,
      var(--color-primary-hover) 100%
    );
  }

  /* Shimmer gradient - for loading states */
  .bg-gradient-shimmer {
    background: linear-gradient(
      90deg,
      transparent,
      var(--color-skeleton-shimmer),
      transparent
    );
  }

  /* Overlay gradient - for image overlays */
  .bg-gradient-overlay {
    background: linear-gradient(
      to top,
      var(--color-overlay-heavy) 0%,
      transparent 100%
    );
  }

  /* Card shine gradient - subtle highlight effect */
  .bg-gradient-card-shine {
    background: linear-gradient(
      135deg,
      transparent 0%,
      var(--color-surface-elevated) 50%,
      transparent 100%
    );
  }

  /* Status gradients */
  .bg-gradient-success {
    background: linear-gradient(
      135deg,
      var(--color-status-success) 0%,
      var(--color-accent-green-hover) 100%
    );
  }

  /* Text gradient for special headings */
  .text-gradient-primary {
    background: linear-gradient(
      90deg,
      var(--color-primary) 0%,
      var(--color-secondary) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}
```
  </action>
  <verify>Run `grep "bg-gradient-hero" src/app/globals.css` returns match</verify>
  <done>Gradient utility classes defined using CSS variables</done>
</task>

<task type="auto">
  <name>Task 2: Convert homepage and UI gradients to utility classes</name>
  <files>
    src/components/homepage/Hero.tsx
    src/components/homepage/CTABanner.tsx
    src/components/homepage/FooterCTA.tsx
    src/components/homepage/HowItWorksSection.tsx
    src/components/homepage/TestimonialsCarousel.tsx
    src/components/ui/cart/CartBar.tsx
    src/components/ui/cart/CartItem.tsx
    src/components/ui/cart/FlyToCart.tsx
    src/components/ui/cart/CartSummary.tsx
    src/components/ui/menu/CategoryTabs.tsx
    src/components/ui/menu/BlurImage.tsx
    src/components/ui/EmptyState.tsx
    src/components/ui/skeleton.tsx
    src/components/menu/UnifiedMenuItemCard/CardImage.tsx
    src/components/menu/category-tabs.tsx
  </files>
  <action>
Replace Tailwind gradient syntax with CSS variable-based utility classes:

Conversion patterns:
- `bg-gradient-to-b from-[color] to-[color]` -> `bg-gradient-hero` (if hero section)
- `bg-gradient-to-r from-[color] via-[color] to-[color]` -> appropriate utility class
- Inline gradient styles -> CSS utility class or CSS variable in style prop

Specific conversions:
1. Hero.tsx: Use `bg-gradient-hero` for main hero background
2. CTABanner.tsx: Use `bg-gradient-primary` for CTA backgrounds
3. FooterCTA.tsx: Use `bg-gradient-primary` or create footer-specific if needed
4. HowItWorksSection.tsx: Convert step card gradients
5. TestimonialsCarousel.tsx: Convert carousel card gradients
6. CartBar.tsx: Convert any gradient backgrounds
7. CartItem.tsx: Convert item highlight gradients
8. CategoryTabs.tsx: Convert tab indicator gradients
9. skeleton.tsx: Use `bg-gradient-shimmer` for loading animation
10. CardImage.tsx: Use `bg-gradient-overlay` for image overlays
11. BlurImage.tsx: Use overlay gradients

For complex gradients that don't fit utilities, use inline CSS variables:
```typescript
style={{
  background: `linear-gradient(135deg, var(--color-primary), var(--color-secondary))`
}}
```
  </action>
  <verify>Run `grep -E "from-\w+-\d+|to-\w+-\d+" src/components/homepage/*.tsx src/components/ui/**/*.tsx src/components/menu/**/*.tsx` returns minimal/no matches</verify>
  <done>Homepage and UI gradients use CSS variable-based utilities</done>
</task>

<task type="auto">
  <name>Task 3: Convert remaining component gradients</name>
  <files>
    src/components/admin/analytics/MetricCard.tsx
    src/components/admin/ExpandableTableRow.tsx
    src/components/admin/routes/RouteListTable.tsx
    src/components/admin/drivers/DriverListTable.tsx
    src/components/checkout/PaymentSuccess.tsx
    src/components/tracking/ETADisplay.tsx
    src/components/tracking/ETACountdown.tsx
    src/components/mascot/BrandMascot.tsx
    src/components/auth/AuthModal.tsx
    src/components/layout/MobileDrawer/DrawerUserSection.tsx
    src/components/layout/AppHeader/AccountIndicator.tsx
    src/components/layout/AppHeader/AppHeader.tsx
    src/app/(customer)/orders/page.tsx
    src/app/(customer)/orders/[id]/page.tsx
  </files>
  <action>
Convert remaining gradient definitions to use CSS variables:

Specific conversions:
1. MetricCard.tsx: Metric card background gradient -> `bg-gradient-surface` or CSS var
2. ExpandableTableRow.tsx: Row expansion highlight
3. RouteListTable.tsx, DriverListTable.tsx: Table row gradients
4. PaymentSuccess.tsx: Success state gradient -> `bg-gradient-success`
5. ETADisplay.tsx, ETACountdown.tsx: Progress indicator gradients
6. BrandMascot.tsx: Mascot glow/highlight effects
7. AuthModal.tsx: Modal background gradients
8. DrawerUserSection.tsx: User profile gradient
9. AccountIndicator.tsx: Account dropdown gradient
10. AppHeader.tsx: Header gradient if any
11. Orders pages: Order card gradients

For each file:
1. Find all `from-*`, `via-*`, `to-*` patterns
2. Convert to CSS variable-based approach
3. Use utility class if pattern matches existing utilities
4. Use inline CSS variable if unique gradient

Handle hex colors in arbitrary values:
- `from-[#hexcode]` -> `from-[var(--color-*)]` or utility class
  </action>
  <verify>Run `grep -E "from-\w+-\d+|to-\w+-\d+|from-\[#" src/components/**/*.tsx src/app/**/*.tsx` returns minimal/no matches</verify>
  <done>All component gradients use CSS variables</done>
</task>

</tasks>

<verification>
1. Run `pnpm typecheck` - no type errors
2. Run `pnpm lint` - no ESLint errors
3. Run `pnpm build` - builds successfully
4. Manual: Test homepage hero gradient in both themes
5. Manual: Test skeleton shimmer animation in both themes
6. Manual: Test cart and menu gradients in both themes
7. Manual: Test admin metric cards in both themes
8. Manual: Test success/celebration gradients in both themes
</verification>

<success_criteria>
- Gradient utility classes defined in globals.css
- All gradients use CSS variables (directly or via utilities)
- Zero hardcoded color values in gradient definitions
- Gradients render correctly in both light and dark themes
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/27-token-enforcement-colors/27-04-SUMMARY.md`
</output>
