---
phase: 27-token-enforcement-colors
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/menu/UnifiedMenuItemCard/AddButton.tsx
  - src/components/ui/menu/UnifiedMenuItemCard/UnifiedMenuItemCard.tsx
  - src/components/ui/layout/MobileDrawer/DrawerUserSection.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "AddButton uses text-text-inverse instead of text-white"
    - "UnifiedMenuItemCard sold-out overlay uses bg-overlay instead of bg-black/50"
    - "DrawerUserSection avatar and button use text-text-inverse instead of text-white"
  artifacts:
    - path: "src/components/ui/menu/UnifiedMenuItemCard/AddButton.tsx"
      provides: "Theme-aware button text colors"
      contains: "text-text-inverse"
    - path: "src/components/ui/menu/UnifiedMenuItemCard/UnifiedMenuItemCard.tsx"
      provides: "Theme-aware sold-out overlay"
      contains: "bg-overlay"
    - path: "src/components/ui/layout/MobileDrawer/DrawerUserSection.tsx"
      provides: "Theme-aware drawer text colors"
      contains: "text-text-inverse"
  key_links:
    - from: "AddButton.tsx"
      to: "tailwind.config.ts"
      via: "text-text-inverse utility"
      pattern: "text-text-inverse"
    - from: "UnifiedMenuItemCard.tsx"
      to: "tailwind.config.ts"
      via: "bg-overlay utility"
      pattern: "bg-overlay"
---

<objective>
Fix remaining hardcoded color values in menu and drawer components to use semantic design tokens.

Purpose: Close verification gaps for menu/drawer components that still use text-white and bg-black instead of semantic tokens.
Output: Three component files migrated to semantic tokens (text-text-inverse, bg-overlay).
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-token-enforcement-colors/27-VERIFICATION.md

Semantic tokens available:
- text-text-inverse: White text on dark backgrounds (theme-aware)
- bg-overlay: Semi-transparent dark overlay (var(--color-overlay) = rgba(0,0,0,0.5))
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix AddButton text colors</name>
  <files>src/components/ui/menu/UnifiedMenuItemCard/AddButton.tsx</files>
  <action>
    Replace hardcoded text-white with text-text-inverse on both button states:

    1. Line 203: In idle state button, change `text-white` to `text-text-inverse`
       - This is the "Add" button with bg-primary

    2. Line 228: In adding state (checkmark animation), change `text-white` to `text-text-inverse`
       - This is the green success circle with bg-green-500
       - Also change `bg-green-500` to `bg-green` (semantic token already exists)

    Both buttons need white text on colored backgrounds - text-text-inverse provides this in a theme-aware way.
  </action>
  <verify>
    Run: grep -n "text-white" src/components/ui/menu/UnifiedMenuItemCard/AddButton.tsx
    Should return no matches.

    Run: grep -n "text-text-inverse" src/components/ui/menu/UnifiedMenuItemCard/AddButton.tsx
    Should return 2 matches (lines ~203 and ~228).
  </verify>
  <done>AddButton uses text-text-inverse on both primary and success button states</done>
</task>

<task type="auto">
  <name>Task 2: Fix UnifiedMenuItemCard sold-out overlay</name>
  <files>src/components/ui/menu/UnifiedMenuItemCard/UnifiedMenuItemCard.tsx</files>
  <action>
    Replace hardcoded bg-black/50 with bg-overlay for the sold-out overlay:

    Line 435: Change `bg-black/50` to `bg-overlay`
    - The bg-overlay token is defined as var(--color-overlay) which equals rgba(0,0,0,0.5) in light mode
    - This provides the same visual appearance but is theme-aware

    Context: This is the semi-transparent overlay shown when a menu item is sold out.
  </action>
  <verify>
    Run: grep -n "bg-black" src/components/ui/menu/UnifiedMenuItemCard/UnifiedMenuItemCard.tsx
    Should return no matches.

    Run: grep -n "bg-overlay" src/components/ui/menu/UnifiedMenuItemCard/UnifiedMenuItemCard.tsx
    Should return at least 1 match.
  </verify>
  <done>Sold-out overlay uses bg-overlay semantic token instead of bg-black/50</done>
</task>

<task type="auto">
  <name>Task 3: Fix DrawerUserSection text colors</name>
  <files>src/components/ui/layout/MobileDrawer/DrawerUserSection.tsx</files>
  <action>
    Replace hardcoded text-white with text-text-inverse in two locations:

    1. Line 41: Avatar initials text - change `text-white` to `text-text-inverse`
       - Avatar has gradient background, needs white text

    2. Line 90: Login/Sign Up button - change `text-white` to `text-text-inverse`
       - Button has bg-primary, needs white text

    Both cases need white text on colored backgrounds - text-text-inverse is the semantic equivalent.
  </action>
  <verify>
    Run: grep -n "text-white" src/components/ui/layout/MobileDrawer/DrawerUserSection.tsx
    Should return no matches.

    Run: grep -n "text-text-inverse" src/components/ui/layout/MobileDrawer/DrawerUserSection.tsx
    Should return 2 matches.
  </verify>
  <done>DrawerUserSection uses text-text-inverse for avatar and button text</done>
</task>

</tasks>

<verification>
Run full verification:
```bash
# Check no text-white/bg-black violations remain
grep -rn "text-white" src/components/ui/menu/UnifiedMenuItemCard/
grep -rn "bg-black" src/components/ui/menu/UnifiedMenuItemCard/
grep -rn "text-white" src/components/ui/layout/MobileDrawer/DrawerUserSection.tsx

# Build check
pnpm typecheck
pnpm lint
```
</verification>

<success_criteria>
- Zero text-white in AddButton.tsx, UnifiedMenuItemCard.tsx, DrawerUserSection.tsx
- Zero bg-black in UnifiedMenuItemCard.tsx
- TypeScript passes
- ESLint passes
</success_criteria>

<output>
After completion, create `.planning/phases/27-token-enforcement-colors/27-05-SUMMARY.md`
</output>
