---
phase: 27-token-enforcement-colors
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/orders/tracking/StatusTimeline.tsx
  - src/components/ui/auth/AuthModal.tsx
  - src/components/ui/auth/MagicLinkSent.tsx
  - src/components/ui/progress.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "StatusTimeline uses text-text-inverse and bg-surface-primary instead of text-white/bg-white"
    - "AuthModal uses bg-overlay-light instead of bg-white/50 and bg-white/80"
    - "MagicLinkSent uses semantic tokens instead of bg-white/10 and bg-white"
    - "progress.tsx uses bg-gradient-progress instead of from-saffron to-jade"
  artifacts:
    - path: "src/components/ui/orders/tracking/StatusTimeline.tsx"
      provides: "Theme-aware status badges"
      contains: "text-text-inverse"
    - path: "src/components/ui/auth/AuthModal.tsx"
      provides: "Theme-aware glassmorphism backdrops"
      contains: "bg-overlay-light"
    - path: "src/components/ui/auth/MagicLinkSent.tsx"
      provides: "Theme-aware envelope animation"
      contains: "bg-surface-primary"
    - path: "src/components/ui/progress.tsx"
      provides: "Theme-aware progress gradient"
      contains: "bg-gradient-progress"
  key_links:
    - from: "progress.tsx"
      to: "globals.css"
      via: "bg-gradient-progress utility"
      pattern: "bg-gradient-progress"
---

<objective>
Fix remaining hardcoded color values in tracking, auth, and progress components to use semantic design tokens.

Purpose: Close verification gaps for StatusTimeline, AuthModal, MagicLinkSent, and progress.tsx components.
Output: Four component files migrated to semantic tokens.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-token-enforcement-colors/27-VERIFICATION.md

Semantic tokens available:
- text-text-inverse: White text on dark backgrounds (theme-aware)
- bg-surface-primary: Primary surface color (white in light, dark in dark mode)
- bg-overlay-light: Light semi-transparent overlay (var(--color-overlay-light) = rgba(255,255,255,0.5))
- bg-gradient-progress: CSS gradient utility defined in globals.css (line 452)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix StatusTimeline text and background colors</name>
  <files>src/components/ui/orders/tracking/StatusTimeline.tsx</files>
  <action>
    Replace hardcoded text-white and bg-white with semantic tokens:

    1. Line 142: Change `text-white` to `text-text-inverse`
       - This is the completed status badge (green background)

    2. Line 143: Change `text-white` to `text-text-inverse`
       - This is the current status badge (primary background)

    3. Line 176: The border-2 border-white on the live indicator dot
       - Change `border-white` to `border-surface-primary`
       - This is the small green dot that shows live tracking is active

    4. Line 187: Change `bg-white` to `bg-surface-primary`
       - This is the checkmark badge background that overlays completed steps

    All these elements need white/light backgrounds or text that should adapt to theme.
  </action>
  <verify>
    Run: grep -n "text-white\|bg-white\|border-white" src/components/ui/orders/tracking/StatusTimeline.tsx
    Should return no matches.

    Run: grep -n "text-text-inverse" src/components/ui/orders/tracking/StatusTimeline.tsx
    Should return 2 matches.
  </verify>
  <done>StatusTimeline uses semantic tokens for all white text/background colors</done>
</task>

<task type="auto">
  <name>Task 2: Fix AuthModal glassmorphism backdrops</name>
  <files>src/components/ui/auth/AuthModal.tsx</files>
  <action>
    Replace hardcoded bg-white opacity variants with semantic tokens:

    1. Line 123: Change `bg-white/50` to `bg-overlay-light`
       - This is the input field background with backdrop blur
       - bg-overlay-light provides rgba(255,255,255,0.5) in light mode

    2. Line 330: Change `bg-white/80` to `bg-overlay-light backdrop-blur-xl`
       - This is the modal content background
       - Since bg-overlay-light is 50% opacity, keep the backdrop-blur-xl for the frosted glass effect
       - For 80% opacity, we need a stronger version

    NOTE: If bg-overlay-light (50%) is too transparent for line 330, use inline style or define bg-surface-primary/80:
       - Alternative: Use `bg-surface-primary/80` which will be theme-aware (white 80% in light, dark 80% in dark)
  </action>
  <verify>
    Run: grep -n "bg-white/" src/components/ui/auth/AuthModal.tsx
    Should return no matches.
  </verify>
  <done>AuthModal uses semantic overlay tokens for glassmorphism effects</done>
</task>

<task type="auto">
  <name>Task 3: Fix MagicLinkSent envelope animation colors</name>
  <files>src/components/ui/auth/MagicLinkSent.tsx</files>
  <action>
    Replace hardcoded bg-white variants with semantic tokens:

    1. Line 106: Change `bg-white/10` to `bg-surface-primary/10`
       - This is the inner glow/shine effect on the envelope
       - Using bg-surface-primary/10 maintains the effect while being theme-aware

    2. Line 120: Change `bg-white` to `bg-surface-primary`
       - This is the letter/paper element coming out of the envelope
       - bg-surface-primary provides white in light mode, dark in dark mode

    Context: The envelope animation shows a letter emerging from a gradient envelope.
    The white colors represent paper/letter which should be surface-primary for theme awareness.
  </action>
  <verify>
    Run: grep -n "bg-white" src/components/ui/auth/MagicLinkSent.tsx
    Should return no matches.
  </verify>
  <done>MagicLinkSent envelope animation uses theme-aware surface tokens</done>
</task>

<task type="auto">
  <name>Task 4: Fix progress.tsx gradient to use utility class</name>
  <files>src/components/ui/progress.tsx</files>
  <action>
    Replace hardcoded Tailwind gradient with CSS utility class:

    1. Line 34: Change `bg-gradient-to-r from-saffron to-jade` to `bg-gradient-progress`
       - The bg-gradient-progress utility is defined in globals.css at line 452
       - It provides the same saffron-to-jade gradient but via CSS variable

    2. Line 42: Same change for the non-spring indicator
       - Change `bg-gradient-to-r from-saffron to-jade` to `bg-gradient-progress`

    The bg-gradient-progress utility in globals.css uses:
    background: linear-gradient(to right, var(--color-secondary), var(--color-accent-green));
    This is theme-aware and consistent with the design system.
  </action>
  <verify>
    Run: grep -n "from-saffron\|to-jade" src/components/ui/progress.tsx
    Should return no matches.

    Run: grep -n "bg-gradient-progress" src/components/ui/progress.tsx
    Should return 2 matches.
  </verify>
  <done>Progress component uses bg-gradient-progress CSS utility instead of hardcoded gradient</done>
</task>

</tasks>

<verification>
Run full verification:
```bash
# Check no hardcoded white/black colors remain
grep -rn "text-white\|bg-white\|border-white" src/components/ui/orders/tracking/StatusTimeline.tsx
grep -rn "bg-white/" src/components/ui/auth/AuthModal.tsx
grep -rn "bg-white" src/components/ui/auth/MagicLinkSent.tsx
grep -rn "from-saffron\|to-jade" src/components/ui/progress.tsx

# Build check
pnpm typecheck
pnpm lint
```
</verification>

<success_criteria>
- Zero text-white/bg-white/border-white in StatusTimeline.tsx
- Zero bg-white/ in AuthModal.tsx
- Zero bg-white in MagicLinkSent.tsx
- Zero from-saffron/to-jade in progress.tsx
- TypeScript passes
- ESLint passes
</success_criteria>

<output>
After completion, create `.planning/phases/27-token-enforcement-colors/27-06-SUMMARY.md`
</output>
