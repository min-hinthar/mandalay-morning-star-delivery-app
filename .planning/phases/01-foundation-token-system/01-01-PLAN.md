---
phase: 01-foundation-token-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/design-system/tokens/z-index.ts
autonomous: true

must_haves:
  truths:
    - "TailwindCSS utilities z-base, z-dropdown, z-sticky, z-fixed, z-modal-backdrop, z-modal, z-popover, z-tooltip, z-toast, z-max exist and work"
    - "TypeScript z-index constants mirror CSS tokens exactly"
    - "Components can use z-modal instead of z-[var(--z-modal)]"
  artifacts:
    - path: "src/app/globals.css"
      provides: "TailwindCSS @theme z-index integration"
      contains: "--z-index-"
    - path: "src/design-system/tokens/z-index.ts"
      provides: "TypeScript z-index constants"
      exports: ["zIndex", "zIndexVar", "ZIndexToken"]
  key_links:
    - from: "src/design-system/tokens/z-index.ts"
      to: "src/app/globals.css"
      via: "CSS variable names match"
      pattern: "z-(base|dropdown|sticky|fixed|modal-backdrop|modal|popover|tooltip|toast|max)"
---

<objective>
Integrate z-index tokens with TailwindCSS 4 @theme directive and create TypeScript constants.

Purpose: Enable first-class TailwindCSS utilities (z-modal instead of z-[var(--z-modal)]) and provide type-safe z-index constants for inline styles.
Output: Updated globals.css with @theme z-index, new z-index.ts with mirrored constants.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-token-system/01-RESEARCH.md
@src/styles/tokens.css
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add z-index tokens to TailwindCSS @theme</name>
  <files>src/app/globals.css</files>
  <action>
Add z-index tokens to the existing `@theme inline` block in globals.css. The tokens already exist in tokens.css (lines 254-263), but TailwindCSS needs them in @theme format to generate utilities.

Add these lines inside the `@theme inline { }` block:

```css
/* Z-Index Layer System - generates z-base, z-dropdown, z-modal, etc. */
--z-index-base: 0;
--z-index-dropdown: 10;
--z-index-sticky: 20;
--z-index-fixed: 30;
--z-index-modal-backdrop: 40;
--z-index-modal: 50;
--z-index-popover: 60;
--z-index-tooltip: 70;
--z-index-toast: 80;
--z-index-max: 100;
```

IMPORTANT: Use `--z-index-*` naming (not `--z-*`) because TailwindCSS 4 strips the prefix to generate utilities. This creates: z-base, z-dropdown, z-sticky, z-fixed, z-modal-backdrop, z-modal, z-popover, z-tooltip, z-toast, z-max.

Place after the radius definitions and before the closing brace.
  </action>
  <verify>
Run `pnpm build` - should succeed without CSS errors.
Check build output or use browser devtools to confirm z-modal utility exists.
  </verify>
  <done>
TailwindCSS @theme block contains all 10 z-index tokens. Build passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create TypeScript z-index constants</name>
  <files>src/design-system/tokens/z-index.ts</files>
  <action>
Create directory `src/design-system/tokens/` if it doesn't exist, then create z-index.ts with TypeScript constants that mirror the CSS tokens.

```typescript
/**
 * Z-Index Layer System
 * TypeScript constants mirroring CSS custom properties in tokens.css
 *
 * Use zIndex.modal for inline styles
 * Use zIndexVar.modal for style objects needing CSS var syntax
 * Use z-modal class for TailwindCSS
 */

export const zIndex = {
  base: 0,
  dropdown: 10,
  sticky: 20,
  fixed: 30,
  modalBackdrop: 40,
  modal: 50,
  popover: 60,
  tooltip: 70,
  toast: 80,
  max: 100,
} as const;

export type ZIndexToken = keyof typeof zIndex;
export type ZIndexValue = (typeof zIndex)[ZIndexToken];

/**
 * CSS variable references for style objects
 * @example style={{ zIndex: zIndexVar.modal }}
 */
export const zIndexVar = {
  base: "var(--z-base)",
  dropdown: "var(--z-dropdown)",
  sticky: "var(--z-sticky)",
  fixed: "var(--z-fixed)",
  modalBackdrop: "var(--z-modal-backdrop)",
  modal: "var(--z-modal)",
  popover: "var(--z-popover)",
  tooltip: "var(--z-tooltip)",
  toast: "var(--z-toast)",
  max: "var(--z-max)",
} as const;

/**
 * Tailwind class names for z-index utilities
 * @example className={zClass.modal}
 */
export const zClass = {
  base: "z-base",
  dropdown: "z-dropdown",
  sticky: "z-sticky",
  fixed: "z-fixed",
  modalBackdrop: "z-modal-backdrop",
  modal: "z-modal",
  popover: "z-popover",
  tooltip: "z-tooltip",
  toast: "z-toast",
  max: "z-max",
} as const;
```

This provides three access patterns:
1. `zIndex.modal` (number 50) - for JS logic, comparisons
2. `zIndexVar.modal` (string "var(--z-modal)") - for inline style objects
3. `zClass.modal` (string "z-modal") - for className strings
  </action>
  <verify>
Run `pnpm typecheck` - should pass with no errors in z-index.ts.
Import test: `import { zIndex, zIndexVar, zClass } from '@/design-system/tokens/z-index'` should resolve.
  </verify>
  <done>
File exists at src/design-system/tokens/z-index.ts with all exports. TypeScript compiles without errors.
  </done>
</task>

</tasks>

<verification>
1. `pnpm build` passes without errors
2. `pnpm typecheck` passes without errors
3. In browser devtools, inspect an element - `z-modal` utility should be available
4. Import z-index.ts in a component - types resolve correctly
</verification>

<success_criteria>
- TailwindCSS generates z-base through z-max utilities from @theme
- TypeScript constants provide type-safe access to all z-index values
- No regression in existing build or type checking
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-token-system/01-01-SUMMARY.md`
</output>
