---
phase: 01-foundation-token-system
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/design-system/tokens/z-index.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "zIndexVar values reference --z-index-* CSS variables that exist in globals.css"
    - "Using zIndexVar.modal in inline styles applies correct z-index value"
  artifacts:
    - path: "src/design-system/tokens/z-index.ts"
      provides: "CSS variable references for z-index tokens"
      contains: "var(--z-index-"
  key_links:
    - from: "src/design-system/tokens/z-index.ts"
      to: "src/app/globals.css"
      via: "CSS variable names must match"
      pattern: "--z-index-(base|dropdown|sticky|fixed|modal-backdrop|modal|popover|tooltip|toast|max)"
---

<objective>
Fix zIndexVar CSS variable names to match actual CSS custom properties.

Purpose: TypeScript zIndexVar constants currently reference non-existent CSS variables (--z-modal instead of --z-index-modal). This causes silent failures when using zIndexVar in inline styles.

Output: Corrected z-index.ts with --z-index-* variable references that match globals.css @theme block.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-token-system/01-VERIFICATION.md

@src/design-system/tokens/z-index.ts
@src/app/globals.css (lines 57-67 for z-index tokens)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update zIndexVar to use correct CSS variable names</name>
  <files>src/design-system/tokens/z-index.ts</files>
  <action>
Update the zIndexVar object to reference the correct CSS custom property names.

Current (WRONG):
```typescript
export const zIndexVar = {
  base: "var(--z-base)",
  dropdown: "var(--z-dropdown)",
  // ...
  modal: "var(--z-modal)",
}
```

Correct (MATCHES globals.css):
```typescript
export const zIndexVar = {
  base: "var(--z-index-base)",
  dropdown: "var(--z-index-dropdown)",
  sticky: "var(--z-index-sticky)",
  fixed: "var(--z-index-fixed)",
  modalBackdrop: "var(--z-index-modal-backdrop)",
  modal: "var(--z-index-modal)",
  popover: "var(--z-index-popover)",
  tooltip: "var(--z-index-tooltip)",
  toast: "var(--z-index-toast)",
  max: "var(--z-index-max)",
}
```

The CSS variables in globals.css @theme block are --z-index-* (TailwindCSS 4 strips the prefix to generate z-* utilities, but the raw CSS variables retain the full name).
  </action>
  <verify>
1. Grep for "var(--z-index-" in z-index.ts confirms all 10 tokens use correct prefix
2. No occurrences of "var(--z-base)" or "var(--z-modal)" (without -index-)
3. TypeScript compiles: pnpm typecheck passes
  </verify>
  <done>
All zIndexVar values reference --z-index-* CSS variables matching globals.css definitions.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update JSDoc with correct usage example</name>
  <files>src/design-system/tokens/z-index.ts</files>
  <action>
Update the JSDoc comment above zIndexVar to clarify the CSS variable naming:

```typescript
/**
 * CSS variable references for style objects
 * These reference the --z-index-* custom properties defined in globals.css @theme
 * TailwindCSS 4 generates z-* utilities from these (stripping the prefix)
 * @example style={{ zIndex: zIndexVar.modal }} // outputs var(--z-index-modal)
 */
```

This prevents future confusion about the naming convention.
  </action>
  <verify>
JSDoc contains "--z-index-" reference in the comment
  </verify>
  <done>
Documentation clarifies CSS variable naming convention to prevent future confusion.
  </done>
</task>

</tasks>

<verification>
1. Pattern match: `grep "var(--z-index-" src/design-system/tokens/z-index.ts` returns 10 matches
2. No old pattern: `grep "var(--z-base)" src/design-system/tokens/z-index.ts` returns 0 matches
3. TypeScript: `pnpm typecheck` passes
</verification>

<success_criteria>
- zIndexVar.modal equals "var(--z-index-modal)"
- All 10 zIndexVar properties use --z-index-* prefix
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-token-system/01-04-SUMMARY.md`
</output>
