---
phase: 22-customer-page-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/scroll/AnimatedSection.tsx
  - src/app/globals.css
  - src/lib/motion-tokens.ts
  - src/components/ui-v8/menu/MenuContentV8.tsx
  - src/components/ui-v8/menu/CategoryTabsV8.tsx
  - src/components/ui-v8/menu/MenuGridV8.tsx
autonomous: true

must_haves:
  truths:
    - "Menu items stagger individually at 80ms gaps"
    - "Menu sections trigger at 25% viewport visibility"
    - "Animations replay on scroll re-enter"
    - "Category tabs animate on change with spring"
    - "Glassmorphism cards have 30px+ blur"
  artifacts:
    - path: "src/components/scroll/AnimatedSection.tsx"
      provides: "Updated stagger (80ms) and viewport (25%)"
      contains: "staggerChildren: 0.08"
    - path: "src/app/globals.css"
      provides: "Enhanced glassmorphism and gradient utilities"
      contains: "blur(30px)"
    - path: "src/components/ui-v8/menu/MenuContentV8.tsx"
      provides: "Animated menu page wrapper"
      contains: "AnimatedSection"
  key_links:
    - from: "src/components/ui-v8/menu/MenuGridV8.tsx"
      to: "src/lib/motion-tokens.ts"
      via: "stagger variants import"
      pattern: "import.*motion-tokens"
---

<objective>
Update animation foundation per CONTEXT decisions and enhance Menu page with bold playful animations.

Purpose: Establish consistent 80ms stagger, 25% viewport, and enhanced glassmorphism as foundation for all customer pages. Menu page serves as the reference implementation.

Output: Updated AnimatedSection, enhanced glassmorphism CSS, animated Menu page with playful discovery feel.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/22-customer-page-polish/22-CONTEXT.md
@.planning/phases/22-customer-page-polish/22-RESEARCH.md
@src/components/scroll/AnimatedSection.tsx
@src/lib/motion-tokens.ts
@src/app/globals.css
@src/components/ui-v8/menu/MenuContentV8.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update AnimatedSection and motion tokens for 80ms/25% standards</name>
  <files>
    src/components/scroll/AnimatedSection.tsx
    src/lib/motion-tokens.ts
  </files>
  <action>
Update AnimatedSection.tsx:
- Change `staggerChildren: 0.05` to `staggerChildren: 0.08` (80ms per CONTEXT)
- Change `amount: 0.5` to `amount: 0.25` (trigger at 25% visible per CONTEXT)
- Keep `once: false` (already correct for replay)
- Add configurable props: `staggerGap?: number`, `viewportAmount?: number` with defaults

Update motion-tokens.ts:
- Add `staggerContainer80` variant function that uses 0.08 stagger by default
- Add max stagger delay cap: items beyond index 6 get same delay (500ms max per RESEARCH pitfall)
- Export named constants: `STAGGER_GAP = 0.08`, `VIEWPORT_AMOUNT = 0.25`
  </action>
  <verify>
`grep -n "staggerChildren: 0.08" src/components/scroll/AnimatedSection.tsx` returns match
`grep -n "amount: 0.25" src/components/scroll/AnimatedSection.tsx` returns match
`pnpm typecheck` passes
  </verify>
  <done>AnimatedSection uses 80ms stagger and 25% viewport trigger by default</done>
</task>

<task type="auto">
  <name>Task 2: Enhance glassmorphism and add gradient glow utilities</name>
  <files>src/app/globals.css</files>
  <action>
Update `.glass-menu-card` class:
- Increase base blur from `blur(20px)` to `blur(30px)` per CONTEXT
- Increase hover blur from `blur(24px)` to `blur(36px)`
- Add dynamic opacity: `75%` base, `80%` on hover
- Add colored glass tint support with CSS custom property `--glass-tint`

Add new utility classes:
```css
/* Gradient glow on hover - for cards/buttons */
.glow-gradient {
  position: relative;
}
.glow-gradient::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    rgba(164, 16, 52, 0.3),
    rgba(213, 175, 55, 0.3),
    rgba(164, 16, 52, 0.3)
  );
  opacity: 0;
  filter: blur(8px);
  transition: opacity 0.3s ease;
  z-index: -1;
}
.glow-gradient:hover::before {
  opacity: 1;
}

/* Dark mode gradient glow */
.dark .glow-gradient::before {
  background: linear-gradient(
    135deg,
    rgba(229, 62, 62, 0.4),
    rgba(229, 181, 35, 0.4),
    rgba(229, 62, 62, 0.4)
  );
}

/* Colorful shadow utility */
.shadow-colorful {
  box-shadow:
    0 4px 14px -3px rgba(164, 16, 52, 0.15),
    0 8px 26px -5px rgba(213, 175, 55, 0.1);
}
.dark .shadow-colorful {
  box-shadow:
    0 4px 14px -3px rgba(229, 62, 62, 0.2),
    0 8px 26px -5px rgba(229, 181, 35, 0.15);
}
```
  </action>
  <verify>
`grep -n "blur(30px)" src/app/globals.css` returns match
`grep -n "glow-gradient" src/app/globals.css` returns match
`pnpm build` passes (CSS compiles)
  </verify>
  <done>Glassmorphism enhanced to 30px+ blur, gradient glow utilities available</done>
</task>

<task type="auto">
  <name>Task 3: Add playful animations to Menu page</name>
  <files>
    src/components/ui-v8/menu/MenuContentV8.tsx
    src/components/ui-v8/menu/CategoryTabsV8.tsx
    src/components/ui-v8/menu/MenuGridV8.tsx
  </files>
  <action>
MenuContentV8.tsx:
- Wrap menu sections in AnimatedSection for scroll reveal
- Add entrance animation for search input (fade + slide down)
- Apply `shadow-colorful` class to container on scroll

CategoryTabsV8.tsx:
- Add spring animation when active tab changes (use `layoutId` for pill indicator)
- Add subtle scale on hover for non-active tabs
- Use `spring.snappy` for tab transitions

MenuGridV8.tsx:
- Ensure items use stagger variants (already may have some)
- Add `glow-gradient` class to menu cards
- Confirm individual item stagger (not by row/category)
- Apply `whileInView` with `viewport={{ once: false, amount: 0.25 }}`

All components:
- Respect `useAnimationPreference().shouldAnimate`
- Use motion tokens from `@/lib/motion-tokens`
  </action>
  <verify>
Open http://localhost:3000/menu
- Verify menu items stagger in individually as you scroll
- Verify items re-animate when scrolling back up and down
- Verify category tab change has spring animation
- Verify cards have subtle glow on hover
`pnpm typecheck && pnpm build` passes
  </verify>
  <done>Menu page has playful discovery animations with individual item stagger and hover glow</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. `pnpm build` passes
3. Menu page at /menu shows:
   - Individual item stagger (not row-based)
   - Animations replay on scroll re-enter
   - Category tabs animate smoothly
   - Cards have gradient glow on hover
   - Enhanced glassmorphism blur visible
</verification>

<success_criteria>
- AnimatedSection defaults to 80ms stagger and 25% viewport
- Menu items animate individually with stagger
- Animations replay when scrolling back into view
- Glassmorphism blur increased to 30px+
- Gradient glow utility works on cards
</success_criteria>

<output>
After completion, create `.planning/phases/22-customer-page-polish/22-01-SUMMARY.md`
</output>
