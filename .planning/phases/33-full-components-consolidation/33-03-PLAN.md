---
phase: 33-full-components-consolidation
plan: 03
type: execute
wave: 2
depends_on: ["33-01"]
files_modified:
  - src/components/menu/
  - src/components/ui/menu/
autonomous: true

must_haves:
  truths:
    - "All menu components available from @/components/ui/menu"
    - "menu/ directory no longer exists"
    - "Unique menu/ components (FeaturedCarousel, UnifiedMenuItemCard, etc.) preserved"
    - "Duplicates resolved with ui/menu winner"
  artifacts:
    - path: "src/components/ui/menu/FeaturedCarousel/"
      provides: "Featured carousel component"
    - path: "src/components/ui/menu/UnifiedMenuItemCard/"
      provides: "Unified menu item card component"
    - path: "src/components/ui/menu/index.ts"
      provides: "Complete menu barrel export"
  key_links:
    - from: "consumers"
      to: "@/components/ui/menu"
      via: "import"
      pattern: "from.*@/components/ui/menu"
---

<objective>
Merge menu/ directory into ui/menu/, resolving duplicates.

Purpose: Consolidate parallel menu directories - menu/ has unique components (FeaturedCarousel, UnifiedMenuItemCard) that should be preserved alongside ui/menu/'s newer versions
Output: Single ui/menu/ directory with all menu-related components
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-full-components-consolidation/33-RESEARCH.md
@src/components/ui/menu/index.ts
@src/components/menu/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Resolve duplicates (ui/menu wins)</name>
  <files>
    src/components/menu/SearchInput.tsx
    src/components/menu/MenuGrid.tsx
    src/components/menu/category-tabs.tsx
    src/components/menu/menu-section.tsx
    src/components/menu/menu-skeleton.tsx
  </files>
  <action>
    Delete these menu/ files - ui/menu/ already has superior versions:

    | menu/ file | ui/menu/ winner | Reason |
    |------------|-----------------|--------|
    | SearchInput.tsx | SearchInput.tsx | ui/menu has autocomplete |
    | MenuGrid.tsx | MenuGrid.tsx | menu/ marked @deprecated |
    | category-tabs.tsx | CategoryTabs.tsx | ui/menu is newer, typed |
    | menu-section.tsx | MenuSection.tsx | ui/menu is newer |
    | menu-skeleton.tsx | MenuSkeleton.tsx | ui/menu has more variants |

    Before deleting, verify no unique features exist in menu/ versions that need porting:
    - Read each file, compare with ui/menu/ equivalent
    - If any unique props/features found, port to ui/menu/ first

    Delete the 5 duplicate files from menu/.
  </action>
  <verify>
    Duplicate files removed from menu/
    pnpm typecheck passes
  </verify>
  <done>
    5 duplicate components deleted from menu/
  </done>
</task>

<task type="auto">
  <name>Task 2: Move unique menu/ components to ui/menu/</name>
  <files>
    src/components/menu/FeaturedCarousel/
    src/components/menu/UnifiedMenuItemCard/
    src/components/menu/MenuAccordion.tsx
    src/components/menu/MenuAccordion.stories.tsx
    src/components/menu/MenuCardWrapper.tsx
    src/components/menu/MenuEmptyState.tsx
    src/components/menu/ModifierGroup.tsx
    src/components/menu/QuantitySelector.tsx
    src/components/menu/search-results-grid.tsx
    src/components/menu/menu-header.tsx
    src/components/ui/menu/
  </files>
  <action>
    Move these unique components from menu/ to ui/menu/:

    Directories (move with all contents):
    - FeaturedCarousel/ -> ui/menu/FeaturedCarousel/
    - UnifiedMenuItemCard/ -> ui/menu/UnifiedMenuItemCard/

    Files:
    - MenuAccordion.tsx -> ui/menu/MenuAccordion.tsx
    - MenuAccordion.stories.tsx -> ui/menu/MenuAccordion.stories.tsx
    - MenuCardWrapper.tsx -> ui/menu/MenuCardWrapper.tsx
    - MenuEmptyState.tsx -> ui/menu/MenuEmptyState.tsx
    - ModifierGroup.tsx -> ui/menu/ModifierGroup.tsx
    - QuantitySelector.tsx -> ui/menu/QuantitySelector.tsx
    - search-results-grid.tsx -> ui/menu/SearchResultsGrid.tsx (rename to PascalCase)
    - menu-header.tsx -> ui/menu/MenuHeader.tsx (rename to PascalCase)

    Update any internal imports within moved files to reference new paths.
  </action>
  <verify>
    All unique components exist in ui/menu/
    pnpm typecheck passes
  </verify>
  <done>
    All unique menu components moved to ui/menu/
  </done>
</task>

<task type="auto">
  <name>Task 3: Update barrel exports and consumer imports</name>
  <files>
    src/components/ui/menu/index.ts
  </files>
  <action>
    1. Update ui/menu/index.ts to export all components:
       - Add exports for newly moved components:
         export { FeaturedCarousel } from "./FeaturedCarousel";
         export { UnifiedMenuItemCard } from "./UnifiedMenuItemCard";
         export { MenuAccordion } from "./MenuAccordion";
         export { MenuCardWrapper } from "./MenuCardWrapper";
         export { MenuEmptyState } from "./MenuEmptyState";
         export { ModifierGroup } from "./ModifierGroup";
         export { QuantitySelector } from "./QuantitySelector";
         export { SearchResultsGrid } from "./SearchResultsGrid";
         export { MenuHeader } from "./MenuHeader";

    2. Find and update all consumer imports from @/components/menu:
       grep -rn "from.*@/components/menu" src/ --include="*.tsx" --include="*.ts"

       Update each to @/components/ui/menu.

    3. Delete menu/index.ts and empty menu/ directory.
  </action>
  <verify>
    grep -rn "@/components/menu[^-]" src/ returns empty (exclude menu-items etc)
    ls src/components/menu/ fails (directory removed)
    pnpm build passes
  </verify>
  <done>
    All imports use ui/menu/, old menu/ directory deleted
  </done>
</task>

</tasks>

<verification>
- pnpm build passes
- pnpm typecheck passes
- pnpm lint passes
- No imports from @/components/menu remain
- menu/ directory no longer exists
- All components accessible from @/components/ui/menu
</verification>

<success_criteria>
- All 25 menu/ files either moved to ui/menu/ or deleted as duplicates
- FeaturedCarousel, UnifiedMenuItemCard, MenuAccordion, etc. available from ui/menu/
- All consumers import from canonical location
- menu/ directory completely removed
</success_criteria>

<output>
After completion, create `.planning/phases/33-full-components-consolidation/33-03-SUMMARY.md`
</output>
