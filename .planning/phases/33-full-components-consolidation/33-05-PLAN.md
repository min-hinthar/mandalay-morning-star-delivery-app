---
phase: 33-full-components-consolidation
plan: 05
type: execute
wave: 3
depends_on: ["33-04"]
files_modified:
  - src/components/layout/
  - src/components/layouts/
  - src/components/ui/index.ts
  - src/components/ui/layout/index.ts
autonomous: true

must_haves:
  truths:
    - "layout/ directory no longer exists"
    - "layouts/ directory no longer exists"
    - "All consumer imports updated to canonical locations"
    - "ui/index.ts exports layout primitives"
  artifacts:
    - path: "src/components/ui/index.ts"
      provides: "Barrel export including Stack, Grid, Container"
    - path: "src/components/ui/layout/index.ts"
      provides: "Layout barrel export"
  key_links:
    - from: "consumers"
      to: "@/components/ui"
      via: "import"
      pattern: "from.*@/components/ui"
---

<objective>
Update consumer imports and delete layout/ and layouts/ directories.

Purpose: Complete the layout consolidation by updating all consumers and removing old directories
Output: All layout components accessible from canonical locations, old directories removed
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-full-components-consolidation/33-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update consumer imports for layouts</name>
  <files>
    src/components/ui/index.ts
    src/components/ui/layout/index.ts
  </files>
  <action>
    1. Create ui/layout/index.ts barrel:
       ```typescript
       export { AdminLayout } from "./AdminLayout";
       export { CheckoutLayout } from "./CheckoutLayout";
       export { DriverLayout } from "./DriverLayout";
       export { AppHeader } from "./AppHeader";
       export { HeaderWrapper } from "./HeaderWrapper";
       export { MobileDrawer } from "./MobileDrawer";
       ```

    2. Update ui/index.ts to export primitives:
       ```typescript
       // Add after existing exports
       export { Stack } from "./Stack";
       export type { StackProps } from "./Stack";
       export { Grid } from "./Grid";
       export type { GridProps } from "./Grid";
       export { Container } from "./Container";
       export type { ContainerProps } from "./Container";
       export { Cluster } from "./Cluster";
       export { SafeArea } from "./SafeArea";

       // Re-export layout and search subdirectories
       export * from "./layout";
       export * from "./search";
       ```

    3. Find and update all imports from @/components/layouts:
       grep -rn "from.*@/components/layouts" src/ --include="*.tsx" --include="*.ts"

       Primitives: @/components/layouts/Stack -> @/components/ui or @/components/ui/Stack
       Layouts: @/components/layouts/AdminLayout -> @/components/ui/layout

    4. Find and update all imports from @/components/layout:
       grep -rn "from.*@/components/layout[^s]" src/ --include="*.tsx" --include="*.ts"

       AppHeader: @/components/layout/AppHeader -> @/components/ui/layout
       CommandPalette: @/components/layout/CommandPalette -> @/components/ui/search
  </action>
  <verify>
    grep -rn "@/components/layouts" src/ returns empty
    grep -rn "@/components/layout[^s]" src/ returns empty (exclude layouts)
    pnpm typecheck passes
  </verify>
  <done>
    All consumer imports updated to canonical ui/ locations
  </done>
</task>

<task type="auto">
  <name>Task 2: Delete old layout directories</name>
  <files>
    src/components/layout/
    src/components/layouts/
  </files>
  <action>
    1. Verify no remaining imports:
       grep -rn "@/components/layout" src/ --include="*.tsx" --include="*.ts"
       Should show only @/components/ui/layout references

    2. Delete layouts/index.ts (the barrel file)
    3. Delete empty layouts/ directory
    4. Delete empty layout/ directory

    Use rm -rf for directories.
  </action>
  <verify>
    ls src/components/layout/ fails (directory removed)
    ls src/components/layouts/ fails (directory removed)
    pnpm build passes
  </verify>
  <done>
    layout/ and layouts/ directories deleted
  </done>
</task>

</tasks>

<verification>
- pnpm build passes
- pnpm typecheck passes
- pnpm lint passes
- No imports from @/components/layout or @/components/layouts remain
- Both directories deleted
</verification>

<success_criteria>
- All consumers import from @/components/ui or @/components/ui/layout
- layout/ directory completely removed
- layouts/ directory completely removed
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/33-full-components-consolidation/33-05-SUMMARY.md`
</output>
