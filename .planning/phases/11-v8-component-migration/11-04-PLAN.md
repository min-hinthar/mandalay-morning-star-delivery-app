---
phase: 11-v8-component-migration
plan: 04
type: execute
wave: 2
depends_on: ["11-01", "11-02", "11-03"]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "TimeStep component resolves to TimeStepV8 in checkout flow"
    - "No TimeStepLegacy imports exist in codebase"
    - "Zero v7-index imports remain in src/app/ and active component files"
  artifacts: []
  key_links:
    - from: "src/components/checkout/index.ts"
      to: "src/components/checkout/TimeStepV8.tsx"
      via: "re-export mapping"
      pattern: "TimeStepV8 as TimeStep"
---

<objective>
Verify TimeStep uses V8 version and confirm all v7-index migrations are complete.

Purpose: Ensure Phase 11 success criteria are met before marking phase complete.
Output: Verification report confirming all V8 migrations successful.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-v8-component-migration/11-RESEARCH.md

@src/components/checkout/index.ts
@src/app/(customer)/checkout/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify TimeStep V8 mapping</name>
  <files></files>
  <action>
Verify the TimeStep -> TimeStepV8 mapping in checkout barrel:

1. Confirm checkout/index.ts exports TimeStep as alias for TimeStepV8
2. Grep for any TimeStepLegacy imports in src/
3. Grep for any direct TimeStep.tsx imports (should use barrel or TimeStepV8)

Expected state (already correct per research):
- checkout/index.ts has `export { TimeStepV8 as TimeStep }`
- No files import TimeStepLegacy
- Checkout page imports TimeStep from barrel (gets V8 version)

If any direct TimeStep.tsx imports found (not TimeStepV8), update them to use TimeStepV8 or the barrel.
  </action>
  <verify>
- `grep -r "TimeStepLegacy" src/` returns empty (no legacy usage)
- `grep "TimeStepV8 as TimeStep" src/components/checkout/index.ts` returns match
  </verify>
  <done>TimeStep correctly resolves to TimeStepV8, no legacy imports exist</done>
</task>

<task type="auto">
  <name>Task 2: Final v7-index import verification</name>
  <files></files>
  <action>
Run comprehensive v7-index grep to confirm all migrations complete:

```bash
# Should return ONLY the v7-index.ts files themselves, not imports from them
grep -r "v7-index" src/ --include="*.ts" --include="*.tsx" | grep -v "v7-index.ts:"
```

Expected: Empty result (no files importing from v7-index barrels)

If any remaining imports found, document them for the summary as either:
- Addressed in this task (update the import)
- Intentional barrel-to-barrel re-exports (acceptable)

Verify all Phase 11 success criteria:
1. Admin dashboard - no V7 imports
2. Driver dashboard - no V7 imports
3. Homepage Hero - uses V8 layout components
4. Tracking page - uses V8 components
5. TimeStep - uses V8 version
  </action>
  <verify>
- `grep -r "from.*v7-index" src/app/` returns empty
- `grep -r "from.*v7-index" src/components/*.tsx` returns empty (checking direct component files)
- `pnpm typecheck && pnpm build` passes
  </verify>
  <done>All v7-index imports eliminated from active code paths</done>
</task>

<task type="auto">
  <name>Task 3: Run full verification suite</name>
  <files></files>
  <action>
Execute full verification to confirm phase success:

```bash
pnpm lint && pnpm lint:css && pnpm typecheck && pnpm test && pnpm build
```

All commands must pass. Document any failures and their resolution.
  </action>
  <verify>
- All lint checks pass
- Type checking passes
- Tests pass
- Build completes successfully
  </verify>
  <done>Full verification suite passes, Phase 11 complete</done>
</task>

</tasks>

<verification>
Phase 11 success criteria verification:

```bash
# 1. Admin dashboard (no V7 imports)
grep -r "admin/v7-index" src/app/
# Expected: empty

# 2. Driver dashboard (no V7 imports)
grep -r "driver/v7-index" src/app/
# Expected: empty

# 3. Homepage Hero uses V8 layout components
grep "layouts/v7-index" src/components/homepage/
# Expected: empty

# 4. Tracking page uses V8 components
grep "./v7-index" src/components/tracking/TrackingPageClient.tsx
# Expected: empty

# 5. TimeStep uses V8 version
grep "TimeStepLegacy" src/
# Expected: empty

# Full build verification
pnpm typecheck && pnpm build
```
</verification>

<success_criteria>
1. TimeStep resolves to TimeStepV8 via barrel export
2. No TimeStepLegacy imports in codebase
3. No v7-index imports in src/app/ directory
4. No v7-index imports in active component files (excluding barrel re-exports)
5. Full verification suite passes (lint, typecheck, test, build)
</success_criteria>

<output>
After completion, create `.planning/phases/11-v8-component-migration/11-04-SUMMARY.md`
</output>
