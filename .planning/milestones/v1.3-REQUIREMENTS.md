# Requirements Archive: v1.3 Full Codebase Consolidation

**Archived:** 2026-01-28
**Status:** âœ… SHIPPED

This is the archived requirements specification for v1.3.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Morning Star v1.3 Full Codebase Consolidation

**Defined:** 2026-01-27
**Core Value:** Every UI element is reliably clickable and the app feels delightfully alive with motion.

## v1.3 Requirements

Requirements for this milestone. Each maps to roadmap phases.

### Token Enforcement - Colors

- [x] **TOKN-01**: All `text-white` replaced with semantic tokens (`text-text-inverse`, `text-hero-text`, etc.)
- [x] **TOKN-02**: All `text-black` replaced with semantic tokens (`text-text-primary`, etc.)
- [x] **TOKN-03**: All `bg-white` replaced with semantic tokens (`bg-surface-primary`, etc.)
- [x] **TOKN-04**: All `bg-black` replaced with semantic tokens (`bg-surface-inverse`, etc.)
- [x] **TOKN-05**: All hardcoded hex colors use token equivalents
- [x] **TOKN-06**: All gradient definitions use theme-aware CSS variables

### Token Enforcement - Spacing & Layout

- [x] **TOKN-07**: All hardcoded pixel values for spacing use Tailwind spacing scale
- [x] **TOKN-08**: All hardcoded margin/padding use design system spacing tokens
- [x] **TOKN-09**: Consistent border-radius using design system tokens

### Token Enforcement - Typography

- [x] **TOKN-10**: All font-size uses Tailwind typography scale (no hardcoded px)
- [x] **TOKN-11**: All font-weight uses semantic tokens (font-normal, font-medium, font-bold)
- [x] **TOKN-12**: All line-height uses design system tokens

### Token Enforcement - Effects & Shadows

- [x] **TOKN-13**: All box-shadow uses design system shadow tokens
- [x] **TOKN-14**: All backdrop-blur uses consistent values via tokens
- [x] **TOKN-15**: All transition/animation durations use motion tokens

### Token Enforcement - Infrastructure

- [x] **TOKN-16**: ESLint rules extended to catch all hardcoded style violations
- [x] **TOKN-17**: Automated audit script detects design token regressions
- [x] **TOKN-18**: Token documentation with visual examples for each category

### Component Consolidation

- [x] **COMP-01**: V7 naming remnants cleaned up (v7Palettes renamed to palettes, etc.)
- [x] **COMP-02**: `ui-v8/` components merged into `ui/` directory
- [x] **COMP-03**: All imports updated to use unified `ui/` path
- [x] **COMP-04**: Duplicate overlay components removed (single Modal, BottomSheet, Drawer)
- [x] **COMP-05**: Tooltip component unified (single implementation)
- [x] **COMP-06**: Toast component unified (single implementation)

### Mobile Stability

- [x] **MOBL-01**: 3D tilt disabled on touch devices via CSS media query `(hover: hover) and (pointer: fine)`
- [x] **MOBL-02**: CSS backface-visibility fixes applied for Safari (`-webkit-backface-visibility: hidden`)
- [x] **MOBL-03**: `translate3d(0,0,0)` applied to tilt elements for proper compositing

### Hero Redesign

- [x] **HERO-01**: Hero section visible without cutoff on page load (mascot fully visible)
- [x] **HERO-02**: Floating food emojis with staggered CSS animations
- [x] **HERO-03**: Multi-layer parallax scroll effect using existing parallaxPresets
- [x] **HERO-04**: Hero works correctly in both light and dark themes
- [x] **HERO-05**: Mascot properly positioned and visible (replaced with emojis per CONTEXT.md)
- [x] **HERO-06**: Gradient background animates on scroll
- [x] **HERO-07**: Legacy gradient code removed, uses semantic tokens only

### Quality Assurance

- [x] **QUAL-01**: All components tested in both light and dark modes
- [x] **QUAL-02**: No hardcoded z-index values (ESLint rule enforced)
- [x] **QUAL-03**: Visual regression tests pass for consolidated components

## Future Requirements

Deferred to v1.4+.

### Performance

- **PERF-01**: Bundle size analysis and optimization
- **PERF-02**: Core Web Vitals improvements (LCP, CLS, INP)

### Documentation

- **DOCS-01**: Component library storybook
- **DOCS-02**: Design token reference site

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| React Three Fiber / 3D hero | Performance concerns, complexity; 2D parallax sufficient |
| Particle.js for hero effects | Unnecessary bundle weight; CSS animations sufficient |
| Heavy post-processing effects | GPU intensive, mobile unfriendly |
| Admin/Driver UX redesign | Focus v1.3 on consolidation; redesign in future milestone |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| TOKN-01 | Phase 27 | Complete |
| TOKN-02 | Phase 27 | Complete |
| TOKN-03 | Phase 27 | Complete |
| TOKN-04 | Phase 27 | Complete |
| TOKN-05 | Phase 27 | Complete |
| TOKN-06 | Phase 27 | Complete |
| TOKN-07 | Phase 28 | Complete |
| TOKN-08 | Phase 28 | Complete |
| TOKN-09 | Phase 28 | Complete |
| TOKN-10 | Phase 28 | Complete |
| TOKN-11 | Phase 28 | Complete |
| TOKN-12 | Phase 28 | Complete |
| TOKN-13 | Phase 29 | Complete |
| TOKN-14 | Phase 29 | Complete |
| TOKN-15 | Phase 29 | Complete |
| TOKN-16 | Phase 25 | Complete |
| TOKN-17 | Phase 25 | Complete |
| TOKN-18 | Phase 32 | Complete |
| COMP-01 | Phase 26 | Complete |
| COMP-02 | Phase 26 | Complete |
| COMP-03 | Phase 26 | Complete |
| COMP-04 | Phase 26 | Complete |
| COMP-05 | Phase 26 | Complete |
| COMP-06 | Phase 26 | Complete |
| MOBL-01 | Phase 30 | Complete |
| MOBL-02 | Phase 30 | Complete |
| MOBL-03 | Phase 30 | Complete |
| HERO-01 | Phase 31 | Complete |
| HERO-02 | Phase 31 | Complete |
| HERO-03 | Phase 31 | Complete |
| HERO-04 | Phase 31 | Complete |
| HERO-05 | Phase 31 | Complete |
| HERO-06 | Phase 31 | Complete |
| HERO-07 | Phase 31 | Complete |
| QUAL-01 | Phase 32 | Complete |
| QUAL-02 | Phase 32 | Complete |
| QUAL-03 | Phase 32 | Complete |

**Coverage:**
- v1.3 requirements: 37 total
- Mapped to phases: 37
- Completed: 37
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 37 of 37 v1.3 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-28 as part of v1.3 milestone completion*
