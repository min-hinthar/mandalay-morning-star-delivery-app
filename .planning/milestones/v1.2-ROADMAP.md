# Milestone v1.2: Playful UI Overhaul

**Status:** ✅ SHIPPED 2026-01-27
**Phases:** 15-24 (Phase 17 cancelled)
**Total Plans:** 29

## Overview

Transform customer pages with maximum playfulness — unified menu design, 12 micro-interactions, theme refinement, rebuilt header & navigation, and codebase cleanup. Originally included 3D interactive hero (Phases 15-17), but 3D was removed in Phase 24 for performance and maintainability.

## Phases

### Phase 15: Foundation & R3F Setup

**Goal**: Fix TailwindCSS 4 z-index blocking bug and establish React Three Fiber foundation for 3D work
**Depends on**: Nothing (first phase of v1.2)
**Plans**: 2 plans

Plans:
- [x] 15-01-PLAN.md — Z-index token migration (fix dropdown, migrate overlays)
- [x] 15-02-PLAN.md — R3F installation and SSR-safe Scene wrapper

**Details:**
- Fixed z-index token system with zClass exports
- Installed React Three Fiber 9.5.0 (later removed in Phase 24)
- SSR-safe pattern established

---

### Phase 16: 3D Hero Core

**Goal**: User can see and interact with 3D food model in hero section
**Depends on**: Phase 15 (R3F foundation)
**Plans**: 4 plans

Plans:
- [x] 16-01-PLAN.md — Infrastructure: GPU detection hook, branded loader, dependencies
- [x] 16-02-PLAN.md — 3D Scene: Hero3DCanvas with FoodModel, OrbitControls, lighting
- [x] 16-03-PLAN.md — Integration: Hero3DSection (3D/2D switch), Hero.tsx integration
- [x] 16-04-PLAN.md — Gap closure: Source real GLB model and 2D fallback image

**Details:**
- Built complete 3D hero system (later removed in Phase 24)
- GPU detection, loading states, fallback patterns established
- Rice bowl GLB model sourced

---

### Phase 17: 3D Hero Advanced (CANCELLED)

**Goal**: 3D hero feels alive with auto-rotation, physics, carousel, and particle effects
**Depends on**: Phase 16 (3D Hero Core)
**Status**: CANCELLED - 3D hero removed in Phase 24

Plans:
- [ ] 17-01-PLAN.md — Auto-rotation and physics-based momentum (not executed)
- [ ] 17-02-PLAN.md — Food carousel with particles (not executed)

**Cancellation Reason:**
Decision to remove 3D hero entirely for better performance and maintainability. Homepage uses gradient/video fallback pattern instead.

---

### Phase 18: Menu Unification

**Goal**: Consistent MenuItemCard design used everywhere menu items appear
**Depends on**: Nothing (can run parallel with 3D work)
**Plans**: 3 plans

Plans:
- [x] 18-01-PLAN.md — UnifiedMenuItemCard component with glassmorphism, 3D tilt, shine effect
- [x] 18-02-PLAN.md — FeaturedCarousel and homepage integration
- [x] 18-03-PLAN.md — Menu page and cart integration

**Details:**
- 3D tilt effect (18 degrees max)
- Glassmorphism with 30px blur
- State machine add button
- Integrated across homepage, menu page, cart

---

### Phase 19: Homepage Redesign

**Goal**: Homepage showcases video hero and has enhanced scroll animations in all sections
**Depends on**: Phase 16 (3D Hero Core), Phase 18 (Menu Unification)
**Plans**: 4 plans

Plans:
- [x] 19-01-PLAN.md — Video hero component + scroll choreography infrastructure
- [x] 19-02-PLAN.md — How It Works section (merged Coverage) + Testimonials carousel
- [x] 19-03-PLAN.md — CTA Banner + Footer animations
- [x] 19-04-PLAN.md — Homepage integration + section nav dots + scroll snap

**Details:**
- Video hero with gradient fallback
- SectionNavDots for desktop navigation
- Scroll snap on desktop
- HowItWorksSection, TestimonialsCarousel, CTABanner

---

### Phase 20: Micro-interactions

**Goal**: Every interactive element has delightful, consistent micro-animations
**Depends on**: Phase 15 (uses motion tokens from foundation)
**Plans**: 4 plans

Plans:
- [x] 20-01-PLAN.md — Button/input/toggle animations with motion token extensions
- [x] 20-02-PLAN.md — Branded spinner, error shake, checkbox animations
- [x] 20-03-PLAN.md — Quantity selector rubbery spring, animated image, sound effects
- [x] 20-04-PLAN.md — Gap closure: Wire orphaned components

**Details:**
- 12 micro-interactions implemented
- BrandedSpinner (8-pointed star)
- ErrorShake for form validation
- AnimatedToggle with spring physics
- AnimatedImage with blur-to-sharp reveal

---

### Phase 21: Theme Refinements

**Goal**: Light and dark modes are polished with smooth transitions
**Depends on**: Phase 16 (3D scene lighting adapts to theme)
**Plans**: 3 plans

Plans:
- [x] 21-01-PLAN.md — Color token refinements and footer theme-awareness
- [x] 21-02-PLAN.md — Animated theme toggle with circular reveal transition
- [x] 21-03-PLAN.md — 3D scene theme-aware lighting adaptation

**Details:**
- OLED-friendly dark mode (pure black #000000)
- View Transitions API for circular reveal
- Theme sounds (Web Audio synthesis)
- Sun/moon icon morph

---

### Phase 22: Customer Page Polish

**Goal**: All customer pages feel consistently playful with enhanced animations
**Depends on**: Phase 20 (micro-interactions applied), Phase 21 (theme consistent)
**Plans**: 3 plans

Plans:
- [x] 22-01-PLAN.md — Animation foundation updates (80ms stagger, 25% viewport) + Menu page polish
- [x] 22-02-PLAN.md — Checkout enhancements (step transitions, stepper glow, form stagger, ErrorShake)
- [x] 22-03-PLAN.md — Order History + Cart polish + Enhanced empty states

**Details:**
- 80ms stagger standard (STAGGER_GAP)
- 25% viewport trigger (VIEWPORT_AMOUNT)
- OrderListAnimated for server component pages
- Enhanced empty states with animated icons

---

### Phase 23: Header & Nav Rebuild

**Goal**: Complete rebuild of header and navigation with modern design, velocity-aware hide/show, command palette search, and mobile drawer
**Depends on**: Phase 20 (micro-interactions), Phase 21 (theme refinements)
**Plans**: 5 plans

Plans:
- [x] 23-01-PLAN.md — Infrastructure hooks: velocity scroll, header visibility, command palette
- [x] 23-02-PLAN.md — AppHeader foundation: desktop/mobile layouts, glassmorphism, nav links
- [x] 23-03-PLAN.md — MobileDrawer: left-slide, swipe-to-close, staggered nav, user section
- [x] 23-04-PLAN.md — CommandPalette: cmdk integration, search results, recent searches
- [x] 23-05-PLAN.md — Integration: Cart/Account indicators, layout wiring, old header replacement

**Details:**
- Velocity-aware scroll hide/show (300px/s threshold)
- CommandPalette with Cmd/Ctrl+K
- MobileDrawer with swipe-to-close (100px threshold)
- CartIndicator with badge bounce
- AccountIndicator with avatar dropdown

---

### Phase 24: Codebase Cleanup

**Goal**: Remove 3D hero code, consolidate to latest implementations only, eliminate legacy migrations and overlapping imports/exports
**Depends on**: Phase 23 (Header & Nav Rebuild)
**Plans**: 3 plans

Plans:
- [x] 24-01-PLAN.md — Remove all 3D code and uninstall R3F packages
- [x] 24-02-PLAN.md — Remove legacy layout files and unused components
- [x] 24-03-PLAN.md — Consolidate animation tokens and final verification

**Details:**
- 33 files deleted
- 6 packages uninstalled (@react-three/fiber, drei, three, etc.)
- ~650KB bundle reduction
- Animation tokens consolidated to single source (motion-tokens.ts)

---

## Milestone Summary

**Cancelled Phase:**
- Phase 17: 3D Hero Advanced (decision to remove 3D hero entirely)

**Key Decisions:**
- 2D hero is permanent standard (not fallback) - gradient + floating animation
- UnifiedMenuItemCard 3D tilt: 18-degree max, spring physics
- Glassmorphism: 30px blur via .glass-menu-card
- 80ms stagger standard, 25% viewport trigger
- Animation tokens single source (motion-tokens.ts)
- AppHeader replaces legacy header.tsx
- MobileDrawer replaces MobileNav.tsx

**Issues Resolved:**
- Z-index token system properly generates utility classes
- Signout button click registers (z-index fix)
- Menu card tilt flickering fixed
- Animation tokens consolidated (no more legacy imports)

**Issues Deferred:**
- Video files not generated (GradientFallback works)
- Account page animations (page doesn't exist)

**Technical Debt Incurred:**
- None - Phase 24 cleanup resolved all tech debt

---

_For current project status, see .planning/ROADMAP.md (next milestone)_
_Archived: 2026-01-27_
